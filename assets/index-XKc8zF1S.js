const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CommentOverlay-C2fEmbuf.js","assets/vendor-reshaped-C4XopQGf.js","assets/vendor-react-DoOg4MWp.js","assets/vendor-reshaped-CU0gdG-S.css","assets/vendor-primer-B_65FTR0.js","assets/vendor-octicons-B28xQhWB.js","assets/vendor-primer-CL7onuSO.css"])))=>i.map(i=>d[i]);
import{j as o,C as pe,V as m,T as b,D as ne,R as lt,B as dt,a as pa,b as An,P as ha,S as ts,F as j,c as Ne,d as re,e as Pe,A as ns,M as De}from"./vendor-reshaped-C4XopQGf.js";import{r as C,u as Ks,f as Vs,O as Gs,h as Jn,g as ma,L as qe,i as ga,j as ba}from"./vendor-react-DoOg4MWp.js";import{S as se,I as va,T as P,U as rs,N as pn,a as Ys,A as Rn,L as Js,u as xa,b as hn,c as mn,d as ya,e as _a,B as wa}from"./vendor-primer-B_65FTR0.js";import{o as ja,M as Sa,p as Zn,m as q,l as Xn,q as Qn,r as er,s as tr,f as nr,t as rr,u as sr,v as or,w as ir,j as Zs,k as Xs,b as Ca,x as ss,y as yt}from"./vendor-octicons-B28xQhWB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ot(e,t){const n={...e};for(const r of Object.keys(t)){const s=t[r],i=e[r];s!==null&&typeof s=="object"&&!Array.isArray(s)&&i!==null&&typeof i=="object"&&!Array.isArray(i)?n[r]=Ot(i,s):n[r]=s}return n}let J={scenes:{},objects:{},records:{}};function Ea(e){if(!e||typeof e!="object")throw new Error("[storyboard-core] init() requires { scenes, objects, records }");J={scenes:e.scenes||{},objects:e.objects||{},records:e.records||{}}}function In(e,t){if(t&&J[t]?.[e]!=null)return J[t][e];if(!t){for(const n of["scenes","objects","records"])if(J[n]?.[e]!=null)return J[n][e]}if(t==="scenes"||!t){const n=e.toLowerCase();for(const r of Object.keys(J.scenes))if(r.toLowerCase()===n)return J.scenes[r]}throw new Error(`Data file not found: ${e}${t?` (type: ${t})`:""}`)}function it(e,t=new Set){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(r=>it(r,t));if(e.$ref&&typeof e.$ref=="string"){const r=e.$ref;if(t.has(r))throw new Error(`Circular $ref detected: ${r}`);t.add(r);const s=In(r,"objects");return it(s,t)}const n={};for(const[r,s]of Object.entries(e))n[r]=it(s,t);return n}function Aa(e){if(J.scenes[e]!=null)return!0;const t=e.toLowerCase();for(const n of Object.keys(J.scenes))if(n.toLowerCase()===t)return!0;return!1}function Vt(e="default"){let t;try{t=structuredClone(In(e,"scenes"))}catch{throw new Error(`Failed to load scene: ${e}`)}if(Array.isArray(t.$global)){const n=t.$global;delete t.$global;let r={};for(const s of n)try{let i=In(s);i=it(i),r=Ot(r,i)}catch(i){console.warn(`Failed to load $global: ${s}`,i)}t=Ot(r,t)}return t=it(t),structuredClone(t)}function ar(e){const t=J.records[e];if(t==null)throw new Error(`Record not found: ${e}`);if(!Array.isArray(t))throw new Error(`Record "${e}" must be an array, got ${typeof t}`);return structuredClone(t)}function Ra(e,t){return ar(e).find(r=>r.id===t)??null}function Qs(e,t){if(e==null||typeof t!="string"||t==="")return;const n=t.split(".");let r=e;for(const s of n){if(r==null||typeof r!="object")return;r=r[s]}return r}function ut(e){if(Array.isArray(e))return e.map(ut);if(e!==null&&typeof e=="object"){const t={};for(const n of Object.keys(e))t[n]=ut(e[n]);return t}return e}function Pt(e,t,n){const r=t.split(".");let s=e;for(let i=0;i<r.length-1;i++){const a=r[i];(s[a]==null||typeof s[a]!="object")&&(s[a]=/^\d+$/.test(r[i+1])?[]:{}),s=s[a]}s[r[r.length-1]]=n}function Gt(){const e=window.location.hash.replace(/^#/,"");return new URLSearchParams(e)}function eo(e){const t=e.toString();window.location.hash=t}function to(e){return Gt().get(e)}function ze(e,t){const n=Gt();n.set(e,String(t)),eo(n)}function no(){const e=Gt(),t={};for(const[n,r]of e.entries())t[n]=r;return t}function Mt(e){const t=Gt();t.delete(e),eo(t)}const Yt="storyboard:";function Jt(e){try{return localStorage.getItem(Yt+e)}catch{return null}}function W(e,t){try{localStorage.setItem(Yt+e,String(t)),cr()}catch{}}function Nt(e){try{localStorage.removeItem(Yt+e),cr()}catch{}}function ro(e){const t=()=>{so(),e()};return window.addEventListener("storage",t),window.addEventListener("storyboard-storage",t),()=>{window.removeEventListener("storage",t),window.removeEventListener("storyboard-storage",t)}}let st=null;function so(){st=null}function oo(){if(st!==null)return st;try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(Yt)&&e.push(n+"="+localStorage.getItem(n))}return st=e.sort().join("&"),st}catch{return""}}function cr(){so(),window.dispatchEvent(new Event("storyboard-storage"))}const lr="__hide__",Lt="historyState",Be="currentState",Le="nextState",os=200;function je(){return Jt(lr)==="1"}function io(){gt(),W(lr,"1");const e=new URL(window.location.href);e.searchParams.delete("hide"),e.hash="",window.history.replaceState(window.history.state,"",e.toString())}function ao(){const e=bt();if(e){window.location.hash="";const t=new URLSearchParams(e);for(const[n,r]of t.entries())ze(n,r)}Nt(lr),$a("show")}function Zt(){return window.location.pathname}function co(){return new URLSearchParams(window.location.hash.replace(/^#/,"")).toString()}function gt(e,t){const n=e!==void 0?e:co(),r=t!==void 0?t:Zt(),s=Xt(),i=Qt();if(i!==null&&s[i]){const[,u,f]=s[i];if(u===r&&f===n)return}const a=i!==null?s.slice(0,i+1):s,c=a.length,l=[c,r,n],d=[...a,l];if(d.length>os){const u=d.slice(d.length-os);for(let f=0;f<u.length;f++)u[f]=[f,u[f][1],u[f][2]];W(Lt,JSON.stringify(u)),W(Be,String(u.length-1))}else W(Lt,JSON.stringify(d)),W(Be,String(c));Nt(Le)}function Xt(){const e=Jt(Lt);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function Qt(){const e=Jt(Be);if(e===null)return null;const t=parseInt(e,10);return Number.isNaN(t)?null:t}function Ia(){const e=Jt(Le);if(e===null)return null;const t=parseInt(e,10);return Number.isNaN(t)?null:t}function bt(){const e=Qt();if(e===null)return null;const t=Xt();return t[e]?t[e][2]:null}function lo(){const e=Qt();if(e===null)return null;const t=Xt();return t[e]?t[e][1]:null}function uo(e){const t=bt();return t?new URLSearchParams(t).get(e):null}function is(e,t){const n=bt()||"",r=new URLSearchParams(n);r.set(e,String(t)),gt(r.toString(),lo()||Zt())}function as(e){const t=bt()||"",n=new URLSearchParams(t);n.delete(e),gt(n.toString(),lo()||Zt())}function ka(){const e=bt();if(!e)return{};const t=new URLSearchParams(e),n={};for(const[r,s]of t.entries())n[r]=s;return n}function cs(){if(je())return;const e=Zt(),t=co(),n=Xt(),r=Qt();if(!t&&!e&&n.length===0)return;const s=n.findIndex(([,c,l])=>c===e&&l===t);if(s===-1){gt(t,e);return}if(s===r)return;const i=r!==null?r-1:null,a=Ia();if(i!==null&&s===i)W(Le,String(r)),W(Be,String(s));else if(a!==null&&s===a){const c=a+1;n[c]?W(Le,String(c)):Nt(Le),W(Be,String(s))}else{Nt(Le),W(Be,String(s));const c=n.slice(0,s+1);W(Lt,JSON.stringify(c))}cr()}function Ta(){gt(),window.addEventListener("hashchange",()=>cs()),window.addEventListener("popstate",()=>cs())}function $a(e){const t=new URL(window.location.href);t.searchParams.has(e)&&(t.searchParams.delete(e),window.history.replaceState(window.history.state,"",t.toString()))}function Dt(){const e=new URL(window.location.href);if(e.searchParams.has("hide")){io();return}if(e.searchParams.has("show")){ao();return}}function Oa(){Dt(),window.addEventListener("popstate",()=>Dt())}function en(e){return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)}function dr(){return window.location.hash}const Pa="modulepreload",Ma=function(e){return"/storyboard/"+e},ls={},te=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=l(n.map(d=>{if(d=Ma(d),d in ls)return;ls[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Pa,u||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((v,w)=>{p.addEventListener("load",v),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};let He=null;function Na(e,t={}){if(!e||!e.comments){He=null;return}const n=e.comments,r=e.repository;He={repo:{owner:r?.owner??"",name:r?.name??""},discussions:{category:n.discussions?.category??"Storyboard Comments"},basePath:t.basePath??"/"}}function tn(){return He}function zt(){return He!==null&&He.repo.owner!==""&&He.repo.name!==""}const La=`
.sb-devtools-wrapper {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 9999;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
}

.sb-devtools-trigger {
  display: flex;
  align-items: center;
  padding: 12px;
  background-color: #161b22;
  color: #8b949e;
  border: 1px solid #30363d;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
  transition: opacity 150ms ease, transform 150ms ease;
  user-select: none;
}
.sb-devtools-trigger:hover { transform: scale(1.05); }
.sb-devtools-trigger:active { transform: scale(0.97); }
.sb-devtools-trigger svg { width: 16px; height: 16px; fill: currentColor; }

.sb-devtools-menu {
  position: absolute;
  bottom: 56px;
  right: 0;
  min-width: 200px;
  background-color: #161b22;
  border: 1px solid #30363d;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
  overflow: hidden;
  display: none;
}
.sb-devtools-menu.open { display: block; }

.sb-devtools-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 16px;
  background: none;
  border: none;
  color: #c9d1d9;
  font-size: 14px;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
}
.sb-devtools-menu-item:hover { background-color: #21262d; }
.sb-devtools-menu-item svg { width: 16px; height: 16px; fill: currentColor; flex-shrink: 0; }

.sb-devtools-hint {
  padding: 6px 16px 8px;
  font-size: 12px;
  color: #484f58;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, monospace;
}

.sb-devtools-overlay {
  position: fixed;
  inset: 0;
  z-index: 9998;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding: 16px;
  padding-bottom: 80px;
}
.sb-devtools-backdrop {
  position: fixed;
  inset: 0;
  background: transparent;
}
.sb-devtools-panel {
  position: relative;
  width: 100%;
  max-width: 640px;
  max-height: 60vh;
  background-color: #0d1117;
  border: 1px solid #30363d;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.sb-devtools-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid #21262d;
}
.sb-devtools-panel-title {
  font-size: 14px;
  font-weight: 600;
  color: #c9d1d9;
}
.sb-devtools-panel-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: none;
  border: none;
  border-radius: 6px;
  color: #8b949e;
  cursor: pointer;
}
.sb-devtools-panel-close:hover { background-color: #21262d; color: #c9d1d9; }
.sb-devtools-panel-close svg { width: 16px; height: 16px; fill: currentColor; }
.sb-devtools-panel-body {
  overflow: auto;
  padding: 16px;
}
.sb-devtools-code {
  padding: 0;
  margin: 0;
  background: none;
  font-size: 13px;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, monospace;
  line-height: 1.5;
  color: #c9d1d9;
  white-space: pre-wrap;
  word-break: break-word;
}
.sb-devtools-error { color: #f85149; }
`,Da='<svg viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 010-1.5h6.5a.75.75 0 010 1.5H11v3.282l3.666 5.86C15.619 13.04 14.552 15 12.46 15H3.54c-2.092 0-3.159-1.96-2.206-3.358zM6.5 2.5v3.782a.75.75 0 01-.107.384L3.2 12.5h9.6l-3.193-5.834A.75.75 0 019.5 6.282V2.5z"/></svg>',za='<svg viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>',Ba='<svg viewBox="0 0 16 16"><path d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"/></svg>',Ha='<svg viewBox="0 0 16 16"><path d="M8.5 1.75a.75.75 0 0 0-1.5 0V3H1.75a.75.75 0 0 0 0 1.5H3v6H1.75a.75.75 0 0 0 0 1.5H7v1.25a.75.75 0 0 0 1.5 0V12h5.25a.75.75 0 0 0 0-1.5H12v-6h1.75a.75.75 0 0 0 0-1.5H8.5Zm2 8.75h-5a.25.25 0 0 1-.25-.25v-4.5A.25.25 0 0 1 5.5 5.5h5a.25.25 0 0 1 .25.25v4.5a.25.25 0 0 1-.25.25Z"/></svg>',Fa='<svg viewBox="0 0 16 16"><path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"/></svg>',Ua='<svg viewBox="0 0 16 16"><path d="M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14s-3.671-.992-4.933-2.078C1.797 10.831.88 9.577.43 8.899a1.62 1.62 0 0 1 0-1.798c.45-.678 1.367-1.932 2.637-3.023C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5s2.823-.742 3.955-1.715c1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5s-2.824.742-3.955 1.715c-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z"/></svg>',qa='<svg viewBox="0 0 16 16"><path d="M.143 2.31a.75.75 0 0 1 1.047-.167l14.5 10.5a.75.75 0 1 1-.88 1.214l-2.248-1.628C11.346 13.19 9.792 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.831.88 9.577.43 8.899a1.62 1.62 0 0 1 0-1.798c.35-.527 1.06-1.476 2.019-2.398L.31 3.357A.75.75 0 0 1 .143 2.31Zm3.386 3.378a14.21 14.21 0 0 0-1.85 2.244.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.195 0 2.31-.488 3.29-1.191L9.063 9.695A2 2 0 0 1 6.058 7.39L3.529 5.688ZM8 3.5c-.516 0-1.017.09-1.499.251a.75.75 0 1 1-.473-1.423A6.23 6.23 0 0 1 8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.11.166-.248.365-.41.587a.75.75 0 1 1-1.21-.887c.14-.191.26-.367.36-.524a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5Z"/></svg>';function Wa(){return new URLSearchParams(window.location.search).get("scene")||"default"}function Ka(e={}){const t=e.container||document.body,n=e.basePath||"/";if(t.querySelector(".sb-devtools-wrapper"))return;const r=document.createElement("style");r.textContent=La,document.head.appendChild(r);let s=!0,i=!1;const a=document.createElement("div");a.className="sb-devtools-wrapper";const c=document.createElement("button");c.className="sb-devtools-trigger",c.setAttribute("aria-label","Storyboard DevTools"),c.innerHTML=Da;const l=document.createElement("div");l.className="sb-devtools-menu";const d=document.createElement("button");d.className="sb-devtools-menu-item",d.innerHTML=`${Ha} Viewfinder`;const u=document.createElement("button");u.className="sb-devtools-menu-item",u.innerHTML=`${za} Show scene info`;const f=document.createElement("button");f.className="sb-devtools-menu-item",f.innerHTML=`${Ba} Reset all params`;const p=document.createElement("button");p.className="sb-devtools-menu-item";function v(){const _=je();p.innerHTML=`${_?Ua:qa} ${_?"Show mode":"Hide mode"}`}v();const w=document.createElement("div");w.className="sb-devtools-hint",w.innerHTML="Press <code>⌘ + .</code> to hide",l.appendChild(d),l.appendChild(u),l.appendChild(f),l.appendChild(p);function g(){l.querySelectorAll("[data-sb-comment-menu-item]").forEach(_=>_.remove()),zt()&&te(async()=>{const{getCommentsMenuItems:_}=await import("./CommentOverlay-C2fEmbuf.js");return{getCommentsMenuItems:_}},__vite__mapDeps([0,1,2,3,4,5,6])).then(({getCommentsMenuItems:_})=>{const A=_(),O=w;for(const L of A){const z=document.createElement("button");z.className="sb-devtools-menu-item",z.setAttribute("data-sb-comment-menu-item",""),z.innerHTML=`<span style="width:16px;height:16px;display:flex;align-items:center;justify-content:center;">${L.icon}</span> ${L.label}`,z.addEventListener("click",()=>{i=!1,l.classList.remove("open"),L.onClick()}),l.insertBefore(z,O)}})}c.addEventListener("click",()=>{g(),v()}),l.appendChild(w),a.appendChild(l),a.appendChild(c),t.appendChild(a);let h=null;function x(){i=!1,l.classList.remove("open"),h&&h.remove();const _=Wa();let A="",O=null;try{A=JSON.stringify(Vt(_),null,2)}catch(be){O=be.message}h=document.createElement("div"),h.className="sb-devtools-overlay";const L=document.createElement("div");L.className="sb-devtools-backdrop",L.addEventListener("click",y);const z=document.createElement("div");z.className="sb-devtools-panel";const ae=document.createElement("div");ae.className="sb-devtools-panel-header",ae.innerHTML=`<span class="sb-devtools-panel-title">Scene: ${_}</span>`;const Z=document.createElement("button");Z.className="sb-devtools-panel-close",Z.setAttribute("aria-label","Close panel"),Z.innerHTML=Fa,Z.addEventListener("click",y),ae.appendChild(Z);const ce=document.createElement("div");if(ce.className="sb-devtools-panel-body",O)ce.innerHTML=`<span class="sb-devtools-error">${O}</span>`;else{const be=document.createElement("pre");be.className="sb-devtools-code",be.textContent=A,ce.appendChild(be)}z.appendChild(ae),z.appendChild(ce),h.appendChild(L),h.appendChild(z),t.appendChild(h)}function y(){h&&(h.remove(),h=null)}c.addEventListener("click",()=>{i=!i,l.classList.toggle("open",i)}),u.addEventListener("click",x),d.addEventListener("click",()=>{i=!1,l.classList.remove("open"),window.location.href=n+"viewfinder"}),f.addEventListener("click",()=>{window.location.hash="",i=!1,l.classList.remove("open")}),p.addEventListener("click",()=>{je()?ao():io(),v(),i=!1,l.classList.remove("open")}),document.addEventListener("click",_=>{i&&!a.contains(_.target)&&(i=!1,l.classList.remove("open"))}),window.addEventListener("keydown",_=>{_.key==="."&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),s=!s,a.style.display=s?"":"none",s||(i=!1,l.classList.remove("open"),y()))})}function Va(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return Math.abs(t)}function Ga(e,t=[]){for(const n of t)if(n.toLowerCase()===e.toLowerCase())return`/${n}`;try{const n=Vt(e),r=n?.sceneMeta?.route||n?.route;if(r)return`${r.startsWith("/")?r:`/${r}`}?scene=${encodeURIComponent(e)}`}catch{}return`/?scene=${encodeURIComponent(e)}`}function Ya(e){try{return Vt(e)?.sceneMeta||null}catch{return null}}const Ja={sceneMeta:{route:"/Signup",author:"dfosco"},signup:{fullName:"",email:"",password:"",organization:{name:"",size:"",role:""},workspace:{region:"",plan:"starter",newsletter:!1,agreeTerms:!1}}},Za={sceneMeta:{route:"/reshaped-issues",author:"dfosco"},signup:{fullName:"Jane Doe",organization:{name:"Acme Cloud",size:"11-50",role:"developer"},workspace:{region:"us-east-1",plan:"growth"}}},Xa={sceneMeta:{route:"/primer-issues",author:"dfosco"},user:{$ref:"jane-doe"},navigation:{$ref:"navigation"}},Qa={sceneMeta:{route:"/reshaped-issues",author:"dfosco"},user:{$ref:"jane-doe"},navigation:{$ref:"navigation"},projects:[{id:1,name:"primer-react",description:"React components for the Primer Design System",owner:{name:"GitHub",avatar:"https://avatars.githubusercontent.com/u/9919?v=4"},stars:2500,issues:42},{id:2,name:"storyboard",description:"Prototyping meta-framework",owner:{name:"Jane Doe",avatar:"https://avatars.githubusercontent.com/u/1?v=4"},stars:128,issues:7}],settings:{theme:"dark_dimmed",notifications:!0,language:"en"},signup:{fullName:"",email:"",password:"",organization:{name:"",size:"",role:""},workspace:{region:"",plan:"starter",newsletter:!1,agreeTerms:!1}}},ec={primary:[{label:"Overview",url:"/Overview",icon:"home"},{label:"Issues",url:"/primer-issues",icon:"issue-opened"},{label:"Pull Requests",url:"#",icon:"git-pull-request"},{label:"Discussions",url:"#",icon:"comment-discussion"}],secondary:[{label:"Settings",url:"#",icon:"gear"},{label:"Help",url:"#",icon:"question"}]},tc={name:"Jane Doe",username:"janedoe",role:"admin",avatar:"https://avatars.githubusercontent.com/u/1?v=4",profile:{bio:"Designer & developer",location:"San Francisco, CA"}},nc=[{id:"refactor-auth-sso",identifier:"FIL-10",title:"Refactor authentication flow to support SSO providers",description:"Our current auth flow only supports email/password login. We need to extend it to support SSO providers (Google, Okta, Azure AD) for enterprise customers.",status:"todo",priority:"high",labels:["Auth","Backend","Feature"],assignee:null,project:null,estimate:5,author:"danielfosco",authorAvatar:"https://avatars.githubusercontent.com/u/4331946?v=4",createdAt:"2026-02-17T10:50:00Z",acceptanceCriteria:["Users can authenticate via Google OAuth 2.0","Users can authenticate via SAML-based SSO (Okta, Azure AD)","Existing email/password flow remains unchanged","Session tokens are issued consistently regardless of auth method","Admin panel includes SSO configuration settings"],technicalNotes:["Use the existing AuthService class as the base","Add a provider strategy pattern to abstract login methods","Store provider metadata in the identity_providers table","Redirect URI callback must handle both web and mobile clients"],activity:[{type:"created",user:"danielfosco",avatar:"https://avatars.githubusercontent.com/u/4331946?v=4",time:"10min ago"}]},{id:"fix-rate-limiter-bypass",identifier:"FIL-9",title:"Fix rate limiter bypass on batch endpoints",description:"The rate limiter can be bypassed by splitting a large request into multiple smaller batch calls. Each sub-request is counted as a single hit instead of being weighted by payload size.",status:"in_progress",priority:"urgent",labels:["Bug","Security","Backend"],assignee:"danielfosco",assigneeAvatar:"https://avatars.githubusercontent.com/u/4331946?v=4",project:"Platform Infrastructure",estimate:3,author:"danielfosco",authorAvatar:"https://avatars.githubusercontent.com/u/4331946?v=4",createdAt:"2026-02-16T14:20:00Z",acceptanceCriteria:["Batch endpoints count each item in the payload toward the rate limit","Rate limit headers reflect weighted counts","Existing single-request endpoints are unaffected"],technicalNotes:["Update RateLimiterMiddleware to accept a weight function","Batch controller should pass payload.length as weight","Add integration tests for weighted rate limiting"],activity:[{type:"created",user:"danielfosco",avatar:"https://avatars.githubusercontent.com/u/4331946?v=4",time:"1 day ago"},{type:"comment",user:"danielfosco",avatar:"https://avatars.githubusercontent.com/u/4331946?v=4",time:"6 hours ago",body:"Started investigating — the middleware doesn't have access to parsed body at the point it runs. May need to restructure."}]},{id:"add-webhook-retry-logic",identifier:"FIL-8",title:"Add exponential backoff retry logic for webhook deliveries",description:"Webhook deliveries currently fail silently on timeout. We need retry logic with exponential backoff and a dead-letter queue for persistently failing endpoints.",status:"todo",priority:"medium",labels:["Feature","Backend"],assignee:null,project:"Platform Infrastructure",estimate:8,author:"danielfosco",authorAvatar:"https://avatars.githubusercontent.com/u/4331946?v=4",createdAt:"2026-02-15T09:00:00Z",acceptanceCriteria:["Failed webhook deliveries are retried up to 5 times","Retry intervals follow exponential backoff (1s, 2s, 4s, 8s, 16s)","After all retries, the event is moved to a dead-letter queue","Delivery status is visible in the admin dashboard"],technicalNotes:["Use the existing job queue (BullMQ) for retry scheduling","Add a webhook_deliveries table to track attempts","Dead-letter events should be replayable from the admin UI"],activity:[{type:"created",user:"danielfosco",avatar:"https://avatars.githubusercontent.com/u/4331946?v=4",time:"2 days ago"}]},{id:"dashboard-loading-skeleton",identifier:"FIL-7",title:"Add loading skeletons to dashboard widgets",description:"Dashboard widgets show a blank space while data is loading. Add skeleton loaders to improve perceived performance.",status:"done",priority:"low",labels:["Feature","Frontend"],assignee:"danielfosco",assigneeAvatar:"https://avatars.githubusercontent.com/u/4331946?v=4",project:"Dashboard",estimate:2,author:"danielfosco",authorAvatar:"https://avatars.githubusercontent.com/u/4331946?v=4",createdAt:"2026-02-12T16:30:00Z",acceptanceCriteria:["All dashboard cards show skeleton loaders while fetching data","Skeleton matches the shape of the loaded content","Transition from skeleton to content is smooth"],technicalNotes:["Use Reshaped Skeleton component","Wrap each StatCard in a loading boundary"],activity:[{type:"created",user:"danielfosco",avatar:"https://avatars.githubusercontent.com/u/4331946?v=4",time:"5 days ago"},{type:"comment",user:"danielfosco",avatar:"https://avatars.githubusercontent.com/u/4331946?v=4",time:"3 days ago",body:"Done — merged in FIL-7-skeletons branch."}]},{id:"migrate-env-config",identifier:"FIL-6",title:"Migrate environment config to typed schema validation",description:"Environment variables are currently accessed via raw process.env lookups with no validation. Migrate to a typed config schema using zod so missing or malformed values are caught at startup.",status:"todo",priority:"medium",labels:["Backend","DevEx"],assignee:null,project:null,estimate:3,author:"danielfosco",authorAvatar:"https://avatars.githubusercontent.com/u/4331946?v=4",createdAt:"2026-02-10T11:00:00Z",acceptanceCriteria:["All environment variables are defined in a single config schema","Server fails fast on startup if required variables are missing","Types are inferred from the schema — no manual type assertions"],technicalNotes:["Use zod for schema definition and parsing","Create src/config.ts as the single source of truth","Replace all process.env.X references with config.X"],activity:[{type:"created",user:"danielfosco",avatar:"https://avatars.githubusercontent.com/u/4331946?v=4",time:"1 week ago"}]}],ur={signup:Ja,"issues-reshaped":Za,"issues-primer":Xa,default:Qa},rc={navigation:ec,"jane-doe":tc},sc={issues:nc};Ea({scenes:ur,objects:rc,records:sc});const fr=C.createContext(null);function oc(e){const t=e.replace(/\/+$/,"")||"/";return t==="/"?"index":t.split("/").pop()||"index"}function ic({sceneName:e,recordName:t,recordParam:n,children:r}){const s=Ks(),i=new URLSearchParams(s.search).get("scene"),a=oc(s.pathname),c=i||e||(Aa(a)?a:"default"),l=Vs(),{data:d,error:u}=C.useMemo(()=>{try{let p=Vt(c);if(t&&n&&l[n]){const v=Ra(t,l[n]);v&&(p=Ot(p,{record:v}))}return{data:p,error:null}}catch(p){return{data:null,error:p.message}}},[c,t,n,l,s.pathname]),f={data:d,error:u,loading:!1,sceneName:c};return u?o.jsxs("span",{style:{color:"var(--fgColor-danger, #f85149)"},children:["Error loading scene: ",u]}):o.jsx(fr.Provider,{value:f,children:r})}function H(e){const t=C.useContext(fr);if(t===null)throw new Error("useSceneData must be used within a <StoryboardProvider>");const{data:n,loading:r,error:s}=t,i=C.useSyncExternalStore(en,dr),a=C.useSyncExternalStore(ro,oo);return C.useMemo(()=>{if(r||s||n==null)return;const l=je(),d=l?uo:to,u=l?ka:no;if(!e){const h=u(),x=Object.keys(h);if(x.length===0)return n;const y=ut(n);for(const _ of x)Pt(y,_,h[_]);return y}const f=d(e);if(f!==null)return f;const p=e+".",v=u(),w=Object.keys(v).filter(h=>h.startsWith(p)),g=Qs(n,e);if(w.length>0&&g!==void 0){const h=ut(g);for(const x of w){const y=x.slice(p.length);Pt(h,y,v[x])}return h}return g===void 0?(console.warn(`[useSceneData] Path "${e}" not found in scene data.`),{}):g},[n,r,s,e,i,a])}function S(e){const t=C.useContext(fr);if(t===null)throw new Error("useOverride must be used within a <StoryboardProvider>");const{data:n}=t,r=je(),s=n!=null?Qs(n,e):void 0,i=C.useCallback(()=>to(e),[e]),a=C.useSyncExternalStore(en,i);C.useSyncExternalStore(ro,oo);let c;if(r){const u=uo(e);c=u!==null?u:s}else c=a!==null?a:s;const l=C.useCallback(u=>{je()||ze(e,u),is(e,u)},[e]),d=C.useCallback(()=>{je()||Mt(e),as(e)},[e]);return[c,l,d]}function fo(e,t){const n=no(),r=`record.${t}.`,s=Object.keys(n).filter(c=>c.startsWith(r));if(s.length===0)return e;const i=ut(e),a={};for(const c of s){const l=c.slice(r.length),d=l.indexOf(".");if(d===-1)continue;const u=l.slice(0,d),f=l.slice(d+1);a[u]||(a[u]={}),a[u][f]=n[c]}for(const[c,l]of Object.entries(a)){const d=i.find(u=>u.id===c);if(d)for(const[u,f]of Object.entries(l))Pt(d,u,f);else{const u={id:c};for(const[f,p]of Object.entries(l))Pt(u,f,p);i.push(u)}}return i}function po(e,t="id"){const r=Vs()[t],s=C.useSyncExternalStore(en,dr);return C.useMemo(()=>{if(!r)return null;try{const i=ar(e);return fo(i,e).find(c=>c[t]===r)??null}catch(i){return console.error(`[useRecord] ${i.message}`),null}},[e,t,r,s])}function ho(e){const t=C.useSyncExternalStore(en,dr);return C.useMemo(()=>{try{const n=ar(e);return fo(n,e)}catch(n){return console.error(`[useRecords] ${n.message}`),[]}},[e,t])}function ve(e,t,n){return S(`record.${e}.${t}.${n}`)}function ac(e,t=""){const n=t.replace(/\/+$/,"");document.addEventListener("click",s=>{if(s.metaKey||s.ctrlKey||s.shiftKey||s.altKey)return;const i=s.target.closest("a[href]");if(!i||i.target==="_blank")return;const a=new URL(i.href,window.location.origin);if(a.origin!==window.location.origin)return;const c=window.location.hash,l=c&&c!=="#",u=a.hash&&a.hash!=="#"?a.hash:l?c:"";let f=a.pathname;n&&f.startsWith(n)&&(f=f.slice(n.length)||"/"),s.preventDefault(),e.navigate(f+a.search+u),setTimeout(Dt,0)});const r=e.navigate.bind(e);e.navigate=(s,i)=>{const a=window.location.hash;return a&&a!=="#"&&typeof s=="string"&&!s.includes("#")&&(s=s+a),r(s,i).then(l=>(Dt(),l))}}C.createContext(null);const cc="_container_16yqd_1",lc="_header_16yqd_8",dc="_title_16yqd_13",uc="_subtitle_16yqd_21",fc="_grid_16yqd_27",pc="_card_16yqd_35",hc="_thumbnail_16yqd_52",mc="_cardBody_16yqd_72",gc="_sceneName_16yqd_77",bc="_empty_16yqd_84",vc="_sectionTitle_16yqd_93",xc="_branchSection_16yqd_103",yc="_branchMeta_16yqd_107",_c="_author_16yqd_114",wc="_authorAvatar_16yqd_121",jc="_authorName_16yqd_127",$={container:cc,header:lc,title:dc,subtitle:uc,grid:fc,card:pc,thumbnail:hc,cardBody:mc,sceneName:gc,empty:bc,sectionTitle:vc,branchSection:xc,branchMeta:yc,author:_c,authorAvatar:wc,authorName:jc};function ds({name:e}){const t=Va(e),n=[];for(let s=0;s<12;s++){const i=t*(s+1),a=(i*7+s*31)%320,c=(i*13+s*17)%200,l=20+i*(s+3)%80,d=8+i*(s+7)%40,u=.06+i*(s+2)%20/100,f=s%3===0?"var(--placeholder-accent)":s%3===1?"var(--placeholder-fg)":"var(--placeholder-muted)";n.push(o.jsx("rect",{x:a,y:c,width:l,height:d,rx:2,fill:f,opacity:u},s))}const r=[];for(let s=0;s<6;s++){const a=10+t*(s+5)%180;r.push(o.jsx("line",{x1:0,y1:a,x2:320,y2:a,stroke:"var(--placeholder-grid)",strokeWidth:.5,opacity:.4},`h${s}`))}for(let s=0;s<8;s++){const a=10+t*(s+9)%300;r.push(o.jsx("line",{x1:a,y1:0,x2:a,y2:200,stroke:"var(--placeholder-grid)",strokeWidth:.5,opacity:.3},`v${s}`))}return o.jsxs("svg",{viewBox:"0 0 320 200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[o.jsx("rect",{width:"320",height:"200",fill:"var(--placeholder-bg)"}),r,n]})}function mo({scenes:e={},pageModules:t={},basePath:n,title:r="Viewfinder"}){const[s,i]=C.useState(null),a=C.useMemo(()=>Object.keys(e),[e]),c=C.useMemo(()=>Object.keys(t).map(d=>d.replace("/src/pages/","").replace(".jsx","")).filter(d=>!d.startsWith("_")&&d!=="index"&&d!=="viewfinder"),[t]),l=C.useMemo(()=>(n||"/storyboard-source/").replace(/\/branch--[^/]*\/$/,"/"),[n]);return C.useEffect(()=>{const d=`${l}branches.json`;fetch(d).then(u=>u.ok?u.json():[]).then(u=>i(Array.isArray(u)?u:[])).catch(()=>i([]))},[l]),o.jsxs("div",{className:$.container,children:[o.jsxs("header",{className:$.header,children:[o.jsx("h1",{className:$.title,children:r}),o.jsxs("p",{className:$.subtitle,children:[a.length," scene",a.length!==1?"s":"",s&&s.length>0?` · ${s.length} branch preview${s.length!==1?"s":""}`:""]})]}),a.length===0?o.jsxs("p",{className:$.empty,children:["No scenes found. Add a ",o.jsx("code",{children:"*.scene.json"})," file to get started."]}):o.jsxs("section",{children:[o.jsx("h2",{className:$.sectionTitle,children:"Scenes"}),o.jsx("div",{className:$.grid,children:a.map(d=>{const u=Ya(d);return o.jsxs("a",{href:Ga(d,c),className:$.card,children:[o.jsx("div",{className:$.thumbnail,children:o.jsx(ds,{name:d})}),o.jsxs("div",{className:$.cardBody,children:[o.jsx("p",{className:$.sceneName,children:d}),u?.author&&o.jsxs("div",{className:$.author,children:[o.jsx("img",{src:`https://github.com/${u.author}.png?size=32`,alt:u.author,className:$.authorAvatar}),o.jsx("span",{className:$.authorName,children:u.author})]})]})]},d)})})]}),s&&s.length>0&&o.jsxs("section",{className:$.branchSection,children:[o.jsx("h2",{className:$.sectionTitle,children:"Branch Previews"}),o.jsx("div",{className:$.grid,children:s.map(d=>o.jsxs("a",{href:`${l}${d.folder}/`,className:$.card,children:[o.jsx("div",{className:$.thumbnail,children:o.jsx(ds,{name:d.branch})}),o.jsxs("div",{className:$.cardBody,children:[o.jsx("p",{className:$.sceneName,children:d.branch}),o.jsx("p",{className:$.branchMeta,children:d.folder})]})]},d.folder))})]})]})}function Sc(){return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"var(--bgColor-default, #0d1117)"},children:[o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",style:{animation:"spin 0.8s linear infinite"},children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"var(--fgColor-muted, #484f58)",strokeWidth:"2.5",opacity:"0.25"}),o.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"var(--fgColor-default, #e6edf3)",strokeWidth:"2.5",strokeLinecap:"round"})]}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg) } }"})]})}function Cc(){return o.jsx(ic,{children:o.jsx(C.Suspense,{fallback:o.jsx(Sc,{}),children:o.jsx(Gs,{})})})}const pr=Object.freeze(Object.defineProperty({__proto__:null,default:Cc},Symbol.toStringTag,{value:"Module"})),Ec="_navItem_ec50i_1",Ac="_active_ec50i_16",us={navItem:Ec,active:Ac},Rc=[{label:"Overview",path:"/Dashboard"},{label:"Issues",path:"/reshaped-issues"},{label:"Projects",path:"/Dashboard"},{label:"Views",path:"/Dashboard"}];function gn(e){return typeof e=="string"?e:""}function Bt({orgName:e,activePage:t,userInfo:n}){const r=Jn();return o.jsx(pe,{padding:4,children:o.jsxs(m,{direction:"column",gap:2,children:[o.jsx(b,{variant:"featured-3",weight:"bold",children:gn(e)||"—"}),o.jsx(ne,{}),o.jsx("nav",{children:o.jsx(m,{direction:"column",gap:0,children:Rc.map(s=>o.jsx("button",{type:"button",className:`${us.navItem} ${t===s.label?us.active:""}`,onClick:()=>r(s.path),children:o.jsx(b,{variant:"body-3",weight:t===s.label?"bold":"regular",children:s.label})},s.label))})}),n&&o.jsxs(o.Fragment,{children:[o.jsx(ne,{}),o.jsxs(m,{direction:"column",gap:1,paddingTop:1,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:gn(n.name)||"—"}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:gn(n.role)||"—"})]})]})]})})}function Oe(e){return e==null||e===""||typeof e=="object"?"—":String(e)}function _t({label:e,value:t,change:n,color:r}){return o.jsx(pe,{padding:5,children:o.jsxs(m,{direction:"column",gap:2,children:[o.jsx(b,{variant:"body-3",color:"neutral-faded",children:e}),o.jsx(b,{variant:"featured-2",weight:"bold",children:t}),o.jsx(b,{variant:"caption-1",color:r||"positive",children:n})]})})}function Qe({label:e,value:t,max:n,color:r}){return o.jsxs(m,{direction:"column",gap:1,children:[o.jsxs(m,{direction:"row",justify:"space-between",children:[o.jsx(b,{variant:"body-3",children:e}),o.jsx(b,{variant:"body-3",weight:"medium",children:t})]}),o.jsx(ha,{value:typeof n=="number"?parseFloat(t)/n*100:parseFloat(t),color:r,size:"small",attributes:{"aria-label":e}})]})}const Ic=[{label:"Team standup",time:"Today, 10:00"},{label:"Architecture review",time:"Today, 11:30"},{label:"Lunch",time:"Today, 12:30"},{label:"Sprint planning",time:"Today, 14:00"},{label:"Deploy v2.4",time:"Today, 17:00"}];function kc(){const e=H("signup.fullName"),t=H("signup.organization.name"),n=H("signup.organization.size"),r=H("signup.organization.role"),s=H("signup.workspace.region"),i=H("signup.workspace.plan");return o.jsx(lt,{defaultTheme:"reshaped",defaultColorMode:"dark",children:o.jsx(m,{backgroundColor:"page",minHeight:"100vh",padding:12,children:o.jsxs(m,{direction:"row",align:"start",gap:8,wrap:"no-wrap",children:[o.jsx(m.Item,{columns:2,children:o.jsx(Bt,{orgName:Oe(t),activePage:"Overview",userInfo:{name:Oe(e),role:Oe(r)}})}),o.jsx(m.Item,{columns:10,direction:"column",align:"center",justify:"center",children:o.jsxs(m,{direction:"column",maxWidth:"80%",gap:4,children:[o.jsxs(m,{direction:"row",justify:"space-between",align:"center",children:[o.jsx(b,{variant:"featured-2",weight:"bold",children:"Overview"}),o.jsxs(m,{direction:"row",gap:2,align:"center",children:[o.jsxs(dt,{color:"positive",children:[Oe(i)," plan"]}),o.jsx(dt,{variant:"faded",children:Oe(s)})]})]}),o.jsxs(m,{direction:"row",gap:3,children:[o.jsx(m.Item,{columns:3,children:o.jsx(_t,{label:"Active Users",value:"0",change:"No data yet",color:"neutral-faded"})}),o.jsx(m.Item,{columns:3,children:o.jsx(_t,{label:"Deployments",value:"0",change:"No data yet",color:"neutral-faded"})}),o.jsx(m.Item,{columns:3,children:o.jsx(_t,{label:"New Members",value:"1",change:"That's you!",color:"primary"})}),o.jsx(m.Item,{columns:3,children:o.jsx(_t,{label:"Team Size",value:Oe(n),change:"Current plan capacity",color:"primary"})})]}),o.jsxs(m,{direction:"row",gap:4,children:[o.jsx(m.Item,{columns:5,children:o.jsxs(m,{direction:"column",gap:4,children:[o.jsx(pe,{padding:4,children:o.jsx(pa,{})}),o.jsx(pe,{padding:5,children:o.jsxs(m,{direction:"column",gap:3,children:[o.jsx(b,{variant:"body-2",weight:"bold",children:"Schedule"}),o.jsx(m,{direction:"column",gap:2,children:Ic.map(a=>o.jsx(An,{name:`schedule-${a.label}`,children:o.jsxs(m,{direction:"column",children:[o.jsx(b,{variant:"body-3",children:a.label}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:a.time})]})},a.label))})]})})]})}),o.jsx(m.Item,{grow:!0,children:o.jsxs(m,{direction:"column",gap:4,children:[o.jsx(pe,{padding:5,children:o.jsxs(m,{direction:"column",gap:4,children:[o.jsx(b,{variant:"body-2",weight:"bold",children:"Metrics"}),o.jsx(Qe,{label:"Performance",value:"0",max:100,color:"neutral-faded"}),o.jsx(Qe,{label:"Monthly revenue goal",value:"0",max:100,color:"neutral-faded"}),o.jsx(Qe,{label:"Error rate",value:"0",max:100,color:"neutral-faded"}),o.jsx(Qe,{label:"User acquisition",value:"0",max:100,color:"neutral-faded"}),o.jsx(Qe,{label:"Releases shipped",value:"0",max:100,color:"neutral-faded"})]})}),o.jsx(pe,{padding:5,children:o.jsxs(m,{direction:"column",gap:3,children:[o.jsx(b,{variant:"body-2",weight:"bold",children:"Recent activity"}),o.jsx(ne,{}),o.jsxs(m,{direction:"column",gap:4,align:"center",paddingBlock:6,children:[o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"No activity yet"}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"Deployments and events will appear here once your workspace is active."})]})]})})]})})]})]})})]})})})}const hr=Object.freeze(Object.defineProperty({__proto__:null,default:kc},Symbol.toStringTag,{value:"Module"})),bn=["Account","Organization","Workspace","Review"];function le(e){return typeof e=="string"?e:""}function fs(e){return e===!0||e==="true"}function wt({name:e,defaultValue:t,onCommit:n,...r}){const s=C.useRef(t);return o.jsx(Pe,{name:e,defaultValue:t,onChange:({value:i})=>{s.current=i},onBlur:()=>n(s.current),...r})}function Tc(){const e=Jn(),[t,n]=S("signup.step"),r=Math.min(Math.max(parseInt(t,10)||0,0),bn.length-1),s=E=>{const N=typeof E=="function"?E(r):E;n(String(N))},[i,a,c]=S("signup.errors.fullName"),[l,d,u]=S("signup.errors.email"),[f,p,v]=S("signup.errors.password"),[w,g,h]=S("signup.errors.orgName"),[x,y,_]=S("signup.errors.orgSize"),[A,O,L]=S("signup.errors.role"),[z,ae,Z]=S("signup.errors.region"),[ce,be,Ki]=S("signup.errors.plan"),[Vi,Gi,Yi]=S("signup.errors.agreeTerms"),R={fullName:i,email:l,password:f,orgName:w,orgSize:x,role:A,region:z,plan:ce,agreeTerms:Vi},Ji={fullName:a,email:d,password:p,orgName:g,orgSize:y,role:O,region:ae,plan:be,agreeTerms:Gi},Zi={fullName:c,email:u,password:v,orgName:h,orgSize:_,role:L,region:Z,plan:Ki,agreeTerms:Yi},Xi=()=>Object.values(Zi).forEach(E=>E()),Ur=E=>{Xi(),Object.entries(E).forEach(([N,fa])=>Ji[N]?.(fa))},[qr,Qi]=S("signup.fullName"),[Wr,ea]=S("signup.email"),[Kr,ta]=S("signup.password"),[Vr,na]=S("signup.organization.name"),[Gr,ra]=S("signup.organization.size"),[Yr,sa]=S("signup.organization.role"),[Jr,oa]=S("signup.workspace.region"),[Zr,ia]=S("signup.workspace.plan"),[Xr,aa]=S("signup.workspace.newsletter"),[Qr,ca]=S("signup.workspace.agreeTerms"),I=C.useMemo(()=>({fullName:le(qr),email:le(Wr),password:le(Kr),orgName:le(Vr),orgSize:le(Gr),role:le(Yr),region:le(Jr),plan:le(Zr)||"starter",newsletter:fs(Xr),agreeTerms:fs(Qr)}),[qr,Wr,Kr,Vr,Gr,Yr,Jr,Zr,Xr,Qr]);function es(E){const N={};return E===0&&(I.fullName.trim()||(N.fullName="Full name is required."),I.email.trim()||(N.email="Email is required."),I.password.trim()||(N.password="Password is required.")),E===1&&(I.orgName.trim()||(N.orgName="Organization name is required."),I.orgSize.trim()||(N.orgSize="Organization size is required."),I.role.trim()||(N.role="Role is required.")),E===2&&(I.region.trim()||(N.region="Region is required."),I.plan.trim()||(N.plan="Plan is required."),I.agreeTerms||(N.agreeTerms="You must accept terms to continue.")),Ur(N),Object.keys(N).length===0}function la(){es(r)&&s(E=>Math.min(E+1,bn.length-1))}function da(){Ur({}),s(E=>Math.max(E-1,0))}function ua(){if(!es(2)){s(2);return}e("/Dashboard")}return o.jsx(lt,{defaultTheme:"reshaped",defaultColorMode:"dark",children:o.jsx(m,{backgroundColor:"page",minHeight:"100vh",padding:6,align:"center",justify:"center",children:o.jsxs(m,{maxWidth:"560px",width:"100%",direction:"column",gap:6,children:[o.jsxs(m,{direction:"column",gap:2,children:[o.jsx(b,{variant:"featured-1",weight:"bold",children:"Create your cloud account"}),o.jsx(b,{variant:"body-2",color:"neutral-faded",children:"Complete the onboarding flow to configure your account and organization."})]}),o.jsx(ts,{activeId:String(r),children:bn.map((E,N)=>o.jsx(ts.Item,{id:String(N),title:E,completed:N<r,subtitle:`Step ${N+1}`},E))}),o.jsx(pe,{padding:6,children:o.jsxs(m,{direction:"column",gap:5,children:[r===0&&o.jsxs(o.Fragment,{children:[o.jsxs(j,{hasError:!!R.fullName,children:[o.jsx(j.Label,{children:"Full name"}),o.jsx(wt,{name:"fullName",defaultValue:I.fullName,placeholder:"Jane Doe",onCommit:Qi}),R.fullName&&o.jsx(j.Error,{children:R.fullName})]}),o.jsxs(j,{hasError:!!R.email,children:[o.jsx(j.Label,{children:"Email"}),o.jsx(wt,{name:"email",defaultValue:I.email,placeholder:"jane@acme.cloud",onCommit:ea}),R.email&&o.jsx(j.Error,{children:R.email})]}),o.jsxs(j,{hasError:!!R.password,children:[o.jsx(j.Label,{children:"Password"}),o.jsx(wt,{name:"password",defaultValue:I.password,onCommit:ta,inputAttributes:{type:"password"}}),R.password&&o.jsx(j.Error,{children:R.password})]})]}),r===1&&o.jsxs(o.Fragment,{children:[o.jsxs(j,{hasError:!!R.orgName,children:[o.jsx(j.Label,{children:"Organization name"}),o.jsx(wt,{name:"orgName",defaultValue:I.orgName,placeholder:"Acme Cloud",onCommit:na}),R.orgName&&o.jsx(j.Error,{children:R.orgName})]}),o.jsxs(j,{hasError:!!R.orgSize,children:[o.jsx(j.Label,{children:"Organization size"}),o.jsxs(Ne,{name:"orgSize",value:I.orgSize,placeholder:"Select size",onChange:({value:E})=>ra(E),children:[o.jsx("option",{value:"1-10",children:"1–10 employees"}),o.jsx("option",{value:"11-50",children:"11–50 employees"}),o.jsx("option",{value:"51-250",children:"51–250 employees"}),o.jsx("option",{value:"251+",children:"251+ employees"})]}),R.orgSize&&o.jsx(j.Error,{children:R.orgSize})]}),o.jsxs(j,{hasError:!!R.role,children:[o.jsx(j.Label,{children:"Your role"}),o.jsxs(Ne,{name:"role",value:I.role,placeholder:"Select role",onChange:({value:E})=>sa(E),children:[o.jsx("option",{value:"founder",children:"Founder"}),o.jsx("option",{value:"engineering-manager",children:"Engineering Manager"}),o.jsx("option",{value:"developer",children:"Developer"}),o.jsx("option",{value:"platform-admin",children:"Platform Admin"})]}),R.role&&o.jsx(j.Error,{children:R.role})]})]}),r===2&&o.jsxs(o.Fragment,{children:[o.jsxs(j,{hasError:!!R.region,children:[o.jsx(j.Label,{children:"Primary region"}),o.jsxs(Ne,{name:"region",value:I.region,placeholder:"Select region",onChange:({value:E})=>oa(E),children:[o.jsx("option",{value:"us-east-1",children:"US East"}),o.jsx("option",{value:"us-west-2",children:"US West"}),o.jsx("option",{value:"eu-west-1",children:"EU West"}),o.jsx("option",{value:"ap-southeast-1",children:"AP Southeast"})]}),R.region&&o.jsx(j.Error,{children:R.region})]}),o.jsxs(j,{hasError:!!R.plan,children:[o.jsx(j.Label,{children:"Starting plan"}),o.jsxs(Ne,{name:"plan",value:I.plan,onChange:({value:E})=>ia(E),children:[o.jsx("option",{value:"starter",children:"Starter"}),o.jsx("option",{value:"growth",children:"Growth"}),o.jsx("option",{value:"enterprise",children:"Enterprise"})]}),R.plan&&o.jsx(j.Error,{children:R.plan})]}),o.jsx(An,{name:"newsletter",checked:I.newsletter,onChange:({checked:E})=>aa(E?"true":"false"),children:"Email me product updates and onboarding tips"}),o.jsxs(j,{hasError:!!R.agreeTerms,children:[o.jsx(An,{name:"agreeTerms",checked:I.agreeTerms,onChange:({checked:E})=>ca(E?"true":"false"),children:"I agree to the Terms of Service and Privacy Policy"}),R.agreeTerms&&o.jsx(j.Error,{children:R.agreeTerms})]})]}),r===3&&o.jsxs(m,{direction:"column",gap:4,children:[o.jsx(b,{variant:"featured-3",weight:"bold",children:"Review your configuration"}),o.jsxs(m,{direction:"column",gap:3,children:[o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Name"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.fullName})})]}),o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Email"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.email})})]}),o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Organization"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.orgName})})]}),o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Team size"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.orgSize})})]}),o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Role"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.role})})]}),o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Region"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.region})})]}),o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Plan"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.plan})})]}),o.jsxs(m,{direction:"row",align:"center",children:[o.jsx(m.Item,{columns:4,children:o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Newsletter"})}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-2",children:I.newsletter?"Yes":"No"})})]})]})]}),o.jsxs(m,{direction:"row",justify:"end",gap:3,children:[r>0&&o.jsx(re,{variant:"ghost",onClick:da,children:"Back"}),r<3&&o.jsx(re,{color:"primary",onClick:la,children:"Continue"}),r===3&&o.jsx(re,{color:"primary",onClick:ua,children:"Create account"})]})]})})]})})})}const mr=Object.freeze(Object.defineProperty({__proto__:null,default:Tc},Symbol.toStringTag,{value:"Module"})),$c=Object.assign({"/src/pages/Dashboard.jsx":()=>te(()=>Promise.resolve().then(()=>hr),void 0),"/src/pages/Signup.jsx":()=>te(()=>Promise.resolve().then(()=>mr),void 0),"/src/pages/_app.jsx":()=>te(()=>Promise.resolve().then(()=>pr),void 0),"/src/pages/viewfinder.jsx":()=>te(()=>Promise.resolve().then(()=>_o),void 0)});function Oc(){return o.jsx(mo,{scenes:ur,pageModules:$c,basePath:"/storyboard/"})}const go=Object.freeze(Object.defineProperty({__proto__:null,default:Oc},Symbol.toStringTag,{value:"Module"}));var vn={exports:{}},xn,ps;function Pc(){if(ps)return xn;ps=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return xn=e,xn}var yn,hs;function Mc(){if(hs)return yn;hs=1;var e=Pc();function t(){}function n(){}return n.resetWarningCache=t,yn=function(){function r(a,c,l,d,u,f){if(f!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},yn}var ms;function Nc(){return ms||(ms=1,vn.exports=Mc()()),vn.exports}var Lc=Nc();const X=ma(Lc),Dc="_header_1282e_1",zc="_headerContent_1282e_8",Bc="_titleWrapper_1282e_17",Hc="_separator_1282e_21",Fc="_subtitle_1282e_25",et={header:Dc,headerContent:zc,titleWrapper:Bc,separator:Hc,subtitle:Fc},Uc=[{icon:Zn,label:"Code",current:!0},{icon:q,label:"Issues",counter:30},{icon:Xn,label:"Pull Requests",counter:3},{icon:Qn,label:"Discussions"},{icon:er,label:"Actions"},{icon:tr,label:"Projects",counter:7},{icon:nr,label:"Security",counter:12},{icon:rr,label:"Insights"}];function bo({items:e=Uc,title:t,subtitle:n}){return o.jsxs(se,{as:"header",className:et.header,children:[o.jsxs("div",{className:et.headerContent,children:[o.jsx(va,{icon:ja,"aria-label":"Open global navigation menu",unsafeDisableTooltip:!0}),o.jsx(Sa,{size:32}),o.jsxs(se,{direction:"horizontal",gap:"condensed",className:et.titleWrapper,children:[o.jsx("span",{children:t||"title"}),n&&o.jsxs(o.Fragment,{children:[o.jsx(P,{className:et.separator,children:"/"}),o.jsx(P,{className:et.subtitle,children:n||"subtitle"})]})]})]}),o.jsx(rs,{"aria-label":"Repository",children:e.map(r=>o.jsx(rs.Item,{icon:r.icon,"aria-current":r.current?"page":void 0,counter:r.counter,href:r.url,children:r.label},r.label))})]})}bo.propTypes={items:X.arrayOf(X.shape({icon:X.elementType,label:X.string.isRequired,current:X.bool,counter:X.number,url:X.string})),title:X.string,subtitle:X.string};const qc=[{icon:q,label:"Open issues",url:"#"},{icon:sr,label:"Your issues",url:"#"},{icon:or,label:"Assigned to you",url:"#",current:!0},{icon:ir,label:"Mentioning you",url:"#"}];function Wc({items:e=qc}){return o.jsx(pn,{"aria-label":"Navigation",children:e.map(t=>o.jsxs(pn.Item,{href:t.url,"aria-current":t.current?"page":void 0,children:[t.icon&&o.jsx(pn.LeadingVisual,{children:o.jsx(t.icon,{})}),t.label]},t.label))})}const Kc="_wrapper_74lhx_1",Vc="_navigation_74lhx_7",Gc="_main_74lhx_13",Yc="_container_74lhx_22",jt={wrapper:Kc,navigation:Vc,main:Gc,container:Yc};function kn({children:e,title:t,subtitle:n,topnav:r,sidenav:s}){return o.jsxs(se,{className:jt.container,children:[o.jsx(bo,{title:t,subtitle:n,items:r}),o.jsxs("div",{className:jt.wrapper,children:[s&&o.jsx("aside",{className:jt.navigation,children:o.jsx(Wc,{items:s})}),o.jsx("main",{className:jt.main,children:e})]})]})}const gs=[{icon:Zn,label:"Code",url:"/"},{icon:q,label:"Issues",counter:10,url:"/primer-issues",current:!0},{icon:Xn,label:"Pull Requests",counter:3},{icon:Qn,label:"Discussions"},{icon:er,label:"Actions"},{icon:tr,label:"Projects",counter:7},{icon:nr,label:"Security",counter:12},{icon:rr,label:"Insights"}],bs=[{icon:q,label:"Open issues",url:"/primer-issues"},{icon:sr,label:"Your issues",url:""},{icon:or,label:"Assigned to you",url:""},{icon:ir,label:"Mentioning you",url:""}],Jc={todo:q,in_progress:q,done:Xs,cancelled:Zs},vs={todo:"Open",in_progress:"In Progress",done:"Closed",cancelled:"Cancelled"},Zc={urgent:"Urgent",high:"High",medium:"Medium",low:"Low"};function Xc(){const e=po("issues","id");if(H("user"),!e)return o.jsx(kn,{title:"Primer",subtitle:"React",topnav:gs,sidenav:bs,children:o.jsxs("div",{style:{textAlign:"center",padding:"var(--base-size-64) var(--base-size-16)"},children:[o.jsx("h2",{children:"Issue not found"}),o.jsx("p",{style:{color:"var(--fgColor-muted)",marginTop:"var(--base-size-8)"},children:"The issue you're looking for doesn't exist."}),o.jsx(qe,{to:"/primer-issues",style:{color:"var(--fgColor-accent)"},children:"← Back to all issues"})]})});const t=Jc[e.status]||q,n=e.status==="done"||e.status==="cancelled";return o.jsx(kn,{title:"Primer",subtitle:"React",topnav:gs,sidenav:bs,children:o.jsxs("div",{style:{display:"flex",gap:"var(--base-size-32)",alignItems:"flex-start",maxWidth:960},children:[o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--base-size-8)",marginBottom:"var(--base-size-16)",fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:[o.jsx(qe,{to:"/primer-issues",style:{color:"var(--fgColor-muted)",textDecoration:"none"},children:"Issues"}),o.jsx("span",{children:"›"}),o.jsx("span",{children:e.identifier})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--base-size-8)",marginBottom:"var(--base-size-8)"},children:[o.jsx("span",{style:{color:n?"var(--fgColor-done)":"var(--fgColor-success)"},children:o.jsx(t,{size:24})}),o.jsx("h1",{style:{fontSize:"var(--text-title-size-medium)",fontWeight:600,margin:0},children:e.title})]}),o.jsx("div",{style:{marginBottom:"var(--base-size-16)"},children:o.jsx(Ys,{status:n?"issueClosed":"issueOpened",children:vs[e.status]||e.status})}),e.description&&o.jsx("p",{style:{color:"var(--fgColor-muted)",marginBottom:"var(--base-size-24)",lineHeight:1.5},children:e.description}),e.acceptanceCriteria?.length>0&&o.jsxs("div",{style:{marginBottom:"var(--base-size-24)"},children:[o.jsx("h3",{style:{fontSize:"var(--text-body-size-medium)",fontWeight:600,marginBottom:"var(--base-size-8)"},children:"Acceptance Criteria"}),o.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"var(--fgColor-default)"},children:e.acceptanceCriteria.map((r,s)=>o.jsx("li",{style:{marginBottom:"var(--base-size-4)",lineHeight:1.5},children:r},s))})]}),e.technicalNotes?.length>0&&o.jsxs("div",{style:{marginBottom:"var(--base-size-24)"},children:[o.jsx("h3",{style:{fontSize:"var(--text-body-size-medium)",fontWeight:600,marginBottom:"var(--base-size-8)"},children:"Technical Notes"}),o.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"var(--fgColor-default)"},children:e.technicalNotes.map((r,s)=>o.jsx("li",{style:{marginBottom:"var(--base-size-4)",lineHeight:1.5},children:r},s))})]}),o.jsxs("div",{style:{borderTop:"1px solid var(--borderColor-default)",paddingTop:"var(--base-size-16)",marginTop:"var(--base-size-16)"},children:[o.jsx("h3",{style:{fontSize:"var(--text-body-size-medium)",fontWeight:600,marginBottom:"var(--base-size-12)"},children:"Activity"}),o.jsx(se,{gap:"normal",children:(e.activity||[]).map((r,s)=>o.jsxs("div",{style:{display:"flex",gap:"var(--base-size-12)",alignItems:"flex-start"},children:[o.jsx(Rn,{src:r.avatar,size:32,alt:r.user}),o.jsxs("div",{children:[o.jsx(P,{as:"span",style:{fontWeight:600},children:r.user}),o.jsxs(P,{as:"span",style:{color:"var(--fgColor-muted)"},children:[r.type==="created"&&" created the issue",r.type==="comment"&&":"]}),r.body&&o.jsx("p",{style:{color:"var(--fgColor-muted)",margin:"var(--base-size-4) 0 0",lineHeight:1.5},children:r.body}),o.jsx(P,{as:"span",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:r.time})]})]},s))})]})]}),o.jsxs("div",{style:{width:240,flexShrink:0,border:"1px solid var(--borderColor-default)",borderRadius:"var(--borderRadius-medium)",padding:"var(--base-size-16)"},children:[o.jsx(P,{as:"p",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)",fontWeight:600,marginBottom:"var(--base-size-12)"},children:"Properties"}),o.jsx("div",{style:{borderTop:"1px solid var(--borderColor-default)",paddingTop:"var(--base-size-12)"},children:o.jsxs(se,{gap:"normal",children:[o.jsxs("div",{children:[o.jsx(P,{as:"p",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:"Status"}),o.jsx(P,{as:"p",children:vs[e.status]||e.status})]}),o.jsxs("div",{children:[o.jsx(P,{as:"p",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:"Priority"}),o.jsx(P,{as:"p",style:{textTransform:"capitalize"},children:Zc[e.priority]||e.priority})]}),o.jsxs("div",{children:[o.jsx(P,{as:"p",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:"Assignee"}),e.assignee?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--base-size-8)"},children:[o.jsx(Rn,{src:e.assigneeAvatar,size:20,alt:e.assignee}),o.jsx(P,{as:"span",children:e.assignee})]}):o.jsx(P,{as:"p",style:{color:"var(--fgColor-muted)"},children:"Unassigned"})]}),o.jsxs("div",{children:[o.jsx(P,{as:"p",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:"Labels"}),o.jsx("div",{style:{display:"flex",gap:"var(--base-size-4)",flexWrap:"wrap"},children:(e.labels||[]).map(r=>o.jsx(Js,{size:"small",children:r},r))})]}),e.project&&o.jsxs("div",{children:[o.jsx(P,{as:"p",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:"Project"}),o.jsx(P,{as:"p",children:e.project})]}),e.estimate&&o.jsxs("div",{children:[o.jsx(P,{as:"p",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:"Estimate"}),o.jsxs(P,{as:"p",children:[e.estimate," points"]})]})]})})]})]})})}const Qc=Object.freeze(Object.defineProperty({__proto__:null,default:Xc},Symbol.toStringTag,{value:"Module"})),el="_issueRow_138tt_1",tl={issueRow:el},nl=[{icon:Zn,label:"Code",url:"/"},{icon:q,label:"Issues",counter:10,url:"/primer-issues",current:!0},{icon:Xn,label:"Pull Requests",counter:3},{icon:Qn,label:"Discussions"},{icon:er,label:"Actions"},{icon:tr,label:"Projects",counter:7},{icon:nr,label:"Security",counter:12},{icon:rr,label:"Insights"}],rl=[{icon:q,label:"Open issues",url:"",current:!0},{icon:sr,label:"Your issues",url:""},{icon:or,label:"Assigned to you",url:""},{icon:ir,label:"Mentioning you",url:""}],sl={todo:q,in_progress:q,done:Xs,cancelled:Zs};function xs({issue:e}){const t=sl[e.status]||q,n=e.status==="done"||e.status==="cancelled";return o.jsxs(qe,{to:`/primer-issues/${e.id}`,className:tl.issueRow,style:{display:"flex",alignItems:"flex-start",gap:"var(--base-size-12)",padding:"var(--base-size-8) var(--base-size-16)",borderBottom:"1px solid var(--borderColor-default)"},children:[o.jsx("span",{style:{paddingTop:2,color:n?"var(--fgColor-done)":"var(--fgColor-success)"},children:o.jsx(t,{size:16})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx(P,{as:"span",style:{fontWeight:600,fontSize:"var(--text-body-size-medium)"},children:e.title}),o.jsxs("div",{style:{display:"flex",gap:"var(--base-size-4)",marginTop:"var(--base-size-4)",flexWrap:"wrap",alignItems:"center"},children:[o.jsx(P,{as:"span",style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)"},children:e.identifier}),(e.labels||[]).map(r=>o.jsx(Js,{size:"small",children:r},r))]})]}),e.assigneeAvatar&&o.jsx(Rn,{src:e.assigneeAvatar,size:20,alt:e.assignee})]})}function ol(){H("user");const e=ho("issues"),t=e.filter(r=>r.status!=="done"&&r.status!=="cancelled"),n=e.filter(r=>r.status==="done"||r.status==="cancelled");return o.jsx(kn,{title:"Primer",subtitle:"React",topnav:nl,sidenav:rl,children:o.jsxs("div",{style:{maxWidth:960},children:[o.jsxs(se,{direction:"horizontal",gap:"condensed",align:"center",style:{marginBottom:"var(--base-size-16)"},children:[o.jsxs(Ys,{status:"issueOpened",children:[t.length," Open"]}),o.jsxs("span",{style:{fontSize:"var(--text-caption-size)",color:"var(--fgColor-muted)",display:"flex",alignItems:"center",gap:"var(--base-size-4)"},children:[o.jsx(Ca,{size:16})," ",n.length," Closed"]})]}),o.jsxs("div",{style:{border:"1px solid var(--borderColor-default)",borderRadius:"var(--borderRadius-medium)",overflow:"hidden"},children:[t.map(r=>o.jsx(xs,{issue:r},r.id)),n.map(r=>o.jsx(xs,{issue:r},r.id)),e.length===0&&o.jsx("p",{style:{padding:"var(--base-size-32)",textAlign:"center",color:"var(--fgColor-muted)"},children:"No issues found."})]})]})})}const il=Object.freeze(Object.defineProperty({__proto__:null,default:ol},Symbol.toStringTag,{value:"Module"})),vo={todo:"Todo",in_progress:"In Progress",done:"Done",cancelled:"Cancelled"},xo={urgent:"Urgent",high:"High",medium:"Medium",low:"Low"},al=Object.entries(vo),cl=Object.entries(xo);function yo({prefix:e}){const[t,n]=S(`${e}.title`),[r,s]=S(`${e}.description`),[i,a]=S(`${e}.status`),[c,l]=S(`${e}.priority`),[d,u]=S(`${e}.assignee`),[f,p]=S(`${e}.project`),[v,w]=S(`${e}.estimate`);return o.jsxs(m,{direction:"column",gap:4,children:[o.jsxs(j,{children:[o.jsx(j.Label,{children:"Title"}),o.jsx(Pe,{name:"title",value:t??"",onChange:({value:g})=>n(g)})]}),o.jsxs(j,{children:[o.jsx(j.Label,{children:"Description"}),o.jsx(Pe,{name:"description",multiline:!0,value:r??"",onChange:({value:g})=>s(g),inputAttributes:{rows:3}})]}),o.jsxs(m,{direction:"row",gap:4,children:[o.jsx(m.Item,{grow:!0,children:o.jsxs(j,{children:[o.jsx(j.Label,{children:"Status"}),o.jsx(Ne,{name:"status",value:i??"todo",onChange:({value:g})=>a(g),children:al.map(([g,h])=>o.jsx("option",{value:g,children:h},g))})]})}),o.jsx(m.Item,{grow:!0,children:o.jsxs(j,{children:[o.jsx(j.Label,{children:"Priority"}),o.jsx(Ne,{name:"priority",value:c??"medium",onChange:({value:g})=>l(g),children:cl.map(([g,h])=>o.jsx("option",{value:g,children:h},g))})]})})]}),o.jsxs(m,{direction:"row",gap:4,children:[o.jsx(m.Item,{grow:!0,children:o.jsxs(j,{children:[o.jsx(j.Label,{children:"Assignee"}),o.jsx(Pe,{name:"assignee",placeholder:"Username",value:d??"",onChange:({value:g})=>u(g)})]})}),o.jsx(m.Item,{grow:!0,children:o.jsxs(j,{children:[o.jsx(j.Label,{children:"Project"}),o.jsx(Pe,{name:"project",placeholder:"Project name",value:f??"",onChange:({value:g})=>p(g)})]})})]}),o.jsxs(j,{children:[o.jsx(j.Label,{children:"Estimate (points)"}),o.jsx(Pe,{name:"estimate",placeholder:"e.g. 5",value:v??"",onChange:({value:g})=>w(g)})]})]})}const ll={Auth:"neutral",Backend:"critical",Feature:"primary",Bug:"critical",Security:"warning",Frontend:"primary",DevEx:"positive"},St=["title","description","status","priority","assignee","project","estimate"];function dl({issue:e,active:t,onClose:n}){const r={title:ve("issues",e.id,"title"),description:ve("issues",e.id,"description"),status:ve("issues",e.id,"status"),priority:ve("issues",e.id,"priority"),assignee:ve("issues",e.id,"assignee"),project:ve("issues",e.id,"project"),estimate:ve("issues",e.id,"estimate")},s=()=>{St.forEach(c=>{ze(`draft.edit.${c}`,e[c]??"")})},i=()=>{const c=new URLSearchParams(window.location.hash.replace(/^#/,""));St.forEach(l=>{const[,d]=r[l];d(c.get(`draft.edit.${l}`)??"")}),St.forEach(l=>Mt(`draft.edit.${l}`)),n({reason:"save"})},a=()=>{St.forEach(c=>Mt(`draft.edit.${c}`)),n({reason:"cancel"})};return o.jsxs(De,{active:t,onClose:a,onOpen:s,size:"600px",padding:6,position:"center",children:[o.jsx(De.Title,{children:"Edit Issue"}),o.jsx(De.Subtitle,{children:e.identifier}),o.jsxs(m,{direction:"column",gap:4,paddingTop:4,children:[o.jsx(yo,{prefix:"draft.edit"}),o.jsxs(m,{direction:"row",justify:"end",gap:2,paddingTop:2,children:[o.jsx(re,{variant:"outline",onClick:a,children:"Cancel"}),o.jsx(re,{color:"primary",onClick:i,children:"Save"})]})]})]})}function xe(e){return typeof e=="string"?e:""}function ul(){const[e,t,n]=S("ui.editModal"),r=e==="true",s=po("issues","id"),i=H("signup.organization.name"),a=H("signup.fullName"),c=H("signup.organization.role");return s?o.jsx(lt,{defaultTheme:"reshaped",defaultColorMode:"dark",children:o.jsx(m,{backgroundColor:"page",minHeight:"100vh",padding:12,children:o.jsxs(m,{direction:"row",align:"start",gap:8,wrap:"no-wrap",children:[o.jsx(m.Item,{columns:2,children:o.jsx(Bt,{orgName:xe(i),activePage:"Issues",userInfo:{name:xe(a),role:xe(c)}})}),o.jsx(m.Item,{grow:!0,children:o.jsxs(m,{direction:"row",gap:8,align:"start",children:[o.jsx(m.Item,{grow:!0,children:o.jsxs(m,{direction:"column",gap:4,maxWidth:"720px",children:[o.jsxs(m,{direction:"row",gap:2,align:"center",justify:"space-between",children:[o.jsxs(m,{direction:"row",gap:2,align:"center",children:[o.jsx(qe,{to:"/reshaped-issues",style:{textDecoration:"none"},children:o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:xe(i)||"Workspace"})}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"›"}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:s.identifier})]}),o.jsx(re,{variant:"outline",size:"small",onClick:()=>t("true"),children:"Edit issue"})]}),o.jsx(dl,{issue:s,active:r,onClose:()=>n()}),o.jsx(b,{variant:"featured-1",weight:"bold",children:s.title}),s.description&&o.jsx(b,{variant:"body-2",color:"neutral-faded",children:s.description}),s.acceptanceCriteria?.length>0&&o.jsxs(m,{direction:"column",gap:2,children:[o.jsx(b,{variant:"body-2",weight:"bold",children:"Acceptance Criteria"}),o.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:s.acceptanceCriteria.map((l,d)=>o.jsx("li",{style:{marginBottom:"0.5rem"},children:o.jsx(b,{variant:"body-3",children:l})},d))})]}),s.technicalNotes?.length>0&&o.jsxs(m,{direction:"column",gap:2,children:[o.jsx(b,{variant:"body-2",weight:"bold",children:"Technical Notes"}),o.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:s.technicalNotes.map((l,d)=>o.jsx("li",{style:{marginBottom:"0.5rem"},children:o.jsx(b,{variant:"body-3",children:l})},d))})]}),o.jsx(ne,{}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"+ Add sub-issues"}),o.jsx(ne,{}),o.jsxs(m,{direction:"column",gap:3,children:[o.jsx(b,{variant:"body-2",weight:"bold",children:"Activity"}),(s.activity||[]).map((l,d)=>o.jsxs(m,{direction:"row",gap:3,align:"center",children:[o.jsx(ns,{src:l.avatar,initials:l.user?.[0]?.toUpperCase(),size:6}),o.jsxs(m,{direction:"column",children:[o.jsxs(b,{variant:"body-3",children:[o.jsx(b,{weight:"medium",children:l.user}),l.type==="created"&&" created the issue",l.type==="comment"&&":"]}),l.body&&o.jsx(b,{variant:"body-3",color:"neutral-faded",children:l.body}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:l.time})]})]},d))]})]})}),o.jsx(m.Item,{columns:3,children:o.jsx(pe,{padding:4,children:o.jsxs(m,{direction:"column",gap:4,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",weight:"medium",children:"Properties"}),o.jsx(ne,{}),o.jsxs(m,{direction:"column",gap:1,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"Status"}),o.jsx(b,{variant:"body-3",children:vo[s.status]||s.status})]}),o.jsxs(m,{direction:"column",gap:1,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"Priority"}),o.jsx(b,{variant:"body-3",children:xo[s.priority]||s.priority})]}),o.jsxs(m,{direction:"column",gap:1,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"Assignee"}),s.assignee?o.jsxs(m,{direction:"row",gap:2,align:"center",children:[o.jsx(ns,{src:s.assigneeAvatar,initials:s.assignee?.[0]?.toUpperCase(),size:5}),o.jsx(b,{variant:"body-3",children:s.assignee})]}):o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"Assign"})]}),o.jsxs(m,{direction:"column",gap:1,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"Labels"}),o.jsx(m,{direction:"row",gap:1,wrap:!0,children:(s.labels||[]).map(l=>o.jsx(dt,{size:"small",color:ll[l]||"neutral",children:l},l))})]}),o.jsxs(m,{direction:"column",gap:1,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"Project"}),o.jsx(b,{variant:"body-3",color:s.project?void 0:"neutral-faded",children:s.project||"Add to project"})]}),s.estimate&&o.jsxs(m,{direction:"column",gap:1,children:[o.jsx(b,{variant:"caption-1",color:"neutral-faded",children:"Estimate"}),o.jsxs(b,{variant:"body-3",children:[s.estimate," points"]})]})]})})})]})})]})})}):o.jsx(lt,{defaultTheme:"reshaped",defaultColorMode:"dark",children:o.jsx(m,{backgroundColor:"page",minHeight:"100vh",padding:12,children:o.jsxs(m,{direction:"row",align:"start",gap:8,wrap:"no-wrap",children:[o.jsx(m.Item,{columns:2,children:o.jsx(Bt,{orgName:xe(i),activePage:"Issues",userInfo:{name:xe(a),role:xe(c)}})}),o.jsx(m.Item,{grow:!0,children:o.jsxs(m,{direction:"column",gap:4,align:"center",paddingBlock:16,children:[o.jsx(b,{variant:"featured-2",weight:"bold",children:"Issue not found"}),o.jsx(b,{variant:"body-3",color:"neutral-faded",children:"The issue you're looking for doesn't exist."}),o.jsx(qe,{to:"/reshaped-issues",children:"← Back to all issues"})]})})]})})})}const fl=Object.freeze(Object.defineProperty({__proto__:null,default:ul},Symbol.toStringTag,{value:"Module"})),pl="_issueRow_1cpdh_1",hl={issueRow:pl},ml={todo:"○",in_progress:"◐",done:"●",cancelled:"✕"},gl={Auth:"neutral",Backend:"critical",Feature:"primary",Bug:"critical",Security:"warning",Frontend:"primary",DevEx:"positive"},bl={title:"",description:"",status:"todo",priority:"medium",assignee:"",project:"",estimate:""},Tn=["title","description","status","priority","assignee","project","estimate"];function ys(e){Tn.forEach(t=>Mt(`${e}.${t}`))}function vl({active:e,onClose:t,issueCount:n}){const[r]=S("draft.create.title"),s=Jn(),i=`FIL-${n+1}`,a=()=>{Tn.forEach(d=>{ze(`draft.create.${d}`,bl[d])})},c=()=>{if(!(r??"").trim())return;const d=r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||`new-issue-${n+1}`;Tn.forEach(u=>{const f=new URLSearchParams(window.location.hash.replace(/^#/,"")).get(`draft.create.${u}`)??"";ze(`record.issues.${d}.${u}`,f)}),ze(`record.issues.${d}.identifier`,i),ys("draft.create"),t({reason:"save"}),s(`/reshaped-issues/${d}`)},l=()=>{ys("draft.create"),t({reason:"cancel"})};return o.jsxs(De,{active:e,onClose:l,onOpen:a,size:"600px",padding:6,position:"center",children:[o.jsx(De.Title,{children:"Create Issue"}),o.jsx(De.Subtitle,{children:i}),o.jsxs(m,{direction:"column",gap:4,paddingTop:4,children:[o.jsx(yo,{prefix:"draft.create"}),o.jsxs(m,{direction:"row",justify:"end",gap:2,paddingTop:2,children:[o.jsx(re,{variant:"outline",onClick:l,children:"Cancel"}),o.jsx(re,{color:"primary",onClick:c,children:"Save"})]})]})]})}function _n(e){return typeof e=="string"?e:""}function xl(){const[e,t,n]=S("ui.createModal"),r=e==="true",s=ho("issues"),i=H("signup.organization.name"),a=H("signup.fullName"),c=H("signup.organization.role"),l=s.filter(u=>u.status!=="done"&&u.status!=="cancelled"),d=s.filter(u=>u.status==="done"||u.status==="cancelled");return o.jsx(lt,{defaultTheme:"reshaped",defaultColorMode:"dark",children:o.jsx(m,{backgroundColor:"page",minHeight:"100vh",padding:12,children:o.jsxs(m,{direction:"row",align:"start",gap:8,wrap:"no-wrap",children:[o.jsx(m.Item,{columns:2,children:o.jsx(Bt,{orgName:_n(i),activePage:"Issues",userInfo:{name:_n(a),role:_n(c)}})}),o.jsx(m.Item,{grow:!0,children:o.jsxs(m,{direction:"column",gap:4,maxWidth:"900px",children:[o.jsxs(m,{direction:"row",justify:"space-between",align:"center",children:[o.jsx(b,{variant:"featured-2",weight:"bold",children:"Issues"}),o.jsxs(m,{direction:"row",gap:2,align:"center",children:[o.jsxs(dt,{color:"neutral",children:[s.length," total"]}),o.jsx(re,{size:"small",color:"primary",onClick:()=>t("true"),children:"Create issue"})]})]}),o.jsx(vl,{active:r,onClose:()=>n(),issueCount:s.length}),o.jsxs(m,{direction:"column",gap:0,children:[o.jsx(m,{paddingBlock:2,paddingInline:3,children:o.jsxs(b,{variant:"caption-1",color:"neutral-faded",weight:"medium",children:["Open · ",l.length]})}),o.jsx(ne,{}),l.map(u=>o.jsx(_s,{issue:u},u.id))]}),d.length>0&&o.jsxs(m,{direction:"column",gap:0,children:[o.jsx(m,{paddingBlock:2,paddingInline:3,children:o.jsxs(b,{variant:"caption-1",color:"neutral-faded",weight:"medium",children:["Closed · ",d.length]})}),o.jsx(ne,{}),d.map(u=>o.jsx(_s,{issue:u},u.id))]})]})})]})})})}function _s({issue:e}){return o.jsxs(o.Fragment,{children:[o.jsx(qe,{to:`/reshaped-issues/${e.id}`,className:hl.issueRow,children:o.jsxs(m,{direction:"row",align:"center",gap:3,padding:3,children:[o.jsx(b,{variant:"body-3",color:"neutral-faded",attributes:{style:{minWidth:20}},children:ml[e.status]||"○"}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",attributes:{style:{minWidth:50}},children:e.identifier}),o.jsx(m.Item,{grow:!0,children:o.jsx(b,{variant:"body-3",children:e.title})}),o.jsx(m,{direction:"row",gap:1,children:(e.labels||[]).map(t=>o.jsx(dt,{size:"small",color:gl[t]||"neutral",children:t},t))}),o.jsx(b,{variant:"caption-1",color:"neutral-faded",attributes:{style:{textTransform:"capitalize"}},children:e.priority})]})}),o.jsx(ne,{})]})}const yl=Object.freeze(Object.defineProperty({__proto__:null,default:xl},Symbol.toStringTag,{value:"Module"})),_l=Object.assign({"/src/pages/Dashboard.jsx":()=>te(()=>Promise.resolve().then(()=>hr),void 0),"/src/pages/Signup.jsx":()=>te(()=>Promise.resolve().then(()=>mr),void 0),"/src/pages/_app.jsx":()=>te(()=>Promise.resolve().then(()=>pr),void 0),"/src/pages/index.jsx":()=>te(()=>Promise.resolve().then(()=>go),void 0)});function wl(){return o.jsx(mo,{scenes:ur,pageModules:_l,basePath:"/storyboard/"})}const _o=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"}));var ue={route:[/^.*\/src\/pages\/|\.(jsx|tsx|mdx)$/g,""],splat:[/\[\.{3}\w+\]/g,"*"],param:[/\[([^\]]+)\]/g,":$1"],slash:[/^index$|\./g,"/"],optional:[/^-(:?[\w-]+|\*)/,"$1?"]},jl=e=>Object.keys(e).reduce((t,n)=>{const r=n.replace(...ue.route);return{...t,[r]:e[n]}},{}),Sl=(e,t)=>Object.keys(e).filter(r=>!r.includes("/_")||/_layout\.(jsx|tsx)$/.test(r)).reduce((r,s)=>{const i=e[s],a={id:s.replace(...ue.route),...t(i,s)},c=s.replace(...ue.route).replace(...ue.splat).replace(...ue.param).split("/").filter(Boolean);return c.reduce((l,d,u)=>{const f=d.replace(...ue.slash).replace(...ue.optional),p=u===0,v=u===c.length-1&&c.length>1,w=!p&&!v,g=d==="_layout",h=/\([\w-]+\)/.test(f),x=/^\w|\//.test(f)?"unshift":"push";if(p&&c.length===1)return r.push({path:f,...a}),l;if(p||w){const y=p?r:l.children,_=y?.find(O=>O.path===f||O.id?.replace("/_layout","").split("/").pop()===f),A=h?a?.component?{id:f,path:"/"}:{id:f}:{path:f};return _?_.children??=[]:y?.[x]({...A,children:[]}),_||y?.[x==="unshift"?0:y.length-1]}return g?Object.assign(l,a):(v&&l?.children?.[x](a?.index?a:{path:f,...a}),l)},{}),r},[]),Cl=e=>Object.keys(e).reduce((t,n)=>{const r=n.replace(...ue.route).replace(/\+|\([\w-]+\)\//g,"").replace(/(\/)?index/g,"").replace(/\./g,"/");return{...t,[`/${r}`]:e[n]?.default}},{}),El=Object.assign({"/src/pages/_app.jsx":pr}),Al=Object.assign({}),Rl=Object.assign({"/src/pages/Dashboard.jsx":hr,"/src/pages/Signup.jsx":mr,"/src/pages/index.jsx":go,"/src/pages/primer-issues/[id].jsx":Qc,"/src/pages/primer-issues/index.jsx":il,"/src/pages/reshaped-issues/[id].jsx":fl,"/src/pages/reshaped-issues/index.jsx":yl,"/src/pages/viewfinder.jsx":_o}),wo=jl(El),Il=Cl(Al),kl=Sl(Rl,(e,t)=>{const n=/index\.(jsx|tsx|mdx)$/.test(t)&&!t.includes("pages/index")?{index:!0}:{},r=e?.default||C.Fragment;return{...n,Component:()=>e?.Pending?o.jsx(C.Suspense,{fallback:o.jsx(e.Pending,{}),children:o.jsx(r,{})}):o.jsx(r,{}),ErrorBoundary:e?.Catch,loader:e?.Loader,action:e?.Action}}),Fe=wo?._app,Tl=wo?.["404"],$l=Fe?.default||Gs,Ol=()=>{const e=Il[Ks().state?.modal]||C.Fragment;return o.jsx(e,{})},$n=()=>o.jsxs(o.Fragment,{children:[o.jsx($l,{})," ",o.jsx(Ol,{})]}),Pl=()=>Fe?.Pending?o.jsx(C.Suspense,{fallback:o.jsx(Fe.Pending,{}),children:o.jsx($n,{})}):o.jsx($n,{}),Ml={Component:Fe?.default?Pl:$n,ErrorBoundary:Fe?.Catch,loader:Fe?.Loader},Nl={path:"*",Component:Tl?.default||C.Fragment},Ll=[{...Ml,children:[...kl,Nl]}];const Dl="_container_m20cu_1",zl="_buttonWrapper_m20cu_7",Bl="_label_m20cu_12",wn={container:Dl,buttonWrapper:zl,label:Bl};function Hl(){const{setDayScheme:e,setNightScheme:t,colorScheme:n}=xa(),r=a=>{e(a),t(a)},s=[{name:"Light",value:"light",icon:ss},{name:"Light colorblind",value:"light_colorblind",icon:ss},{name:"Dark",value:"dark",icon:yt},{name:"Dark colorblind",value:"dark_colorblind",icon:yt},{name:"Dark high contrast",value:"dark_high_contrast",icon:yt},{name:"Dark Dimmed",value:"dark_dimmed",icon:yt}],i=s.find(a=>a.value===n);return o.jsx(se,{padding:"normal",className:wn.container,children:o.jsx(se,{className:wn.buttonWrapper,children:o.jsxs(hn,{children:[o.jsxs(hn.Button,{size:"small",children:[o.jsx(i.icon,{}),o.jsxs(se,{className:wn.label,children:[" ",i.name]})]}),o.jsx(hn.Overlay,{align:"right",children:o.jsx(mn,{showDividers:!0,children:o.jsx(mn.Group,{selectionVariant:"single",children:s.map(a=>o.jsx(mn.Item,{href:"#",selected:a.value===n,onSelect:()=>r(a.value),children:a.name},a.value))})})})]})})})}const gr="sb-comments-token",br="sb-comments-user";function jo(){try{return localStorage.getItem(gr)}catch{return null}}function Fl(e){localStorage.setItem(gr,e)}function Ul(){localStorage.removeItem(gr),localStorage.removeItem(br)}function vr(){try{const e=localStorage.getItem(br);return e?JSON.parse(e):null}catch{return null}}async function ql(e){const t=await fetch("https://api.github.com/user",{headers:{Authorization:`bearer ${e}`}});if(!t.ok)throw new Error("Invalid token — GitHub returned "+t.status);const n=await t.json(),r={login:n.login,avatarUrl:n.avatar_url};return localStorage.setItem(br,JSON.stringify(r)),r}function Ht(){return jo()!==null}let _e=!1;const On=new Set;function Tt(){return _e}function Wl(){return zt()?!_e&&!Ht()?(console.warn("[storyboard] Sign in first to use comments"),!1):(_e=!_e,So(),_e):(console.warn("[storyboard] Comments not enabled — check storyboard.config.json"),!1)}function ws(e){_e=e,So()}function Kl(e){return On.add(e),()=>On.delete(e)}function So(){for(const e of On)e(_e)}const js=/<!--\s*sb-meta\s+(\{.*?\})\s*-->/;function oe(e){if(!e)return{meta:null,text:""};const t=e.match(js);if(!t)return{meta:null,text:e.trim()};try{const n=JSON.parse(t[1]),r=e.replace(js,"").trim();return{meta:n,text:r}}catch{return{meta:null,text:e.trim()}}}function We(e,t){return`${`<!-- sb-meta ${JSON.stringify(e)} -->`}
${t}`}function Vl(e,t){const{meta:n,text:r}=oe(e),s={...n,...t};return We(s,r)}const Gl="https://api.github.com/graphql";async function D(e,t={},n={}){const{retries:r=2}=n,s=jo();if(!s)throw new Error("Not authenticated — no GitHub PAT found. Please sign in.");let i;for(let a=0;a<=r;a++)try{const c=await fetch(Gl,{method:"POST",headers:{Authorization:`bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:t})});if(c.status===401)throw new Error("GitHub PAT is invalid or expired. Please sign in again.");if(!c.ok)throw new Error(`GitHub API error: ${c.status} ${c.statusText}`);const l=await c.json();if(l.errors?.length)throw new Error(`GraphQL error: ${l.errors.map(d=>d.message).join(", ")}`);return l.data}catch(c){if(i=c,c.message.includes("401")||c.message.includes("Not authenticated")||c.message.includes("invalid or expired"))throw c;a<r&&await new Promise(l=>setTimeout(l,1e3*(a+1)))}throw i}const Yl=`
  query SearchDiscussion($query: String!) {
    search(query: $query, type: DISCUSSION, first: 1) {
      nodes {
        ... on Discussion {
          id
          title
          body
          url
          comments(first: 100) {
            nodes {
              id
              body
              createdAt
              author {
                login
                avatarUrl
              }
              replies(first: 50) {
                nodes {
                  id
                  body
                  createdAt
                  author {
                    login
                    avatarUrl
                  }
                  reactionGroups {
                    content
                    users(first: 0) { totalCount }
                    viewerHasReacted
                  }
                }
              }
              reactionGroups {
                content
                users(first: 0) { totalCount }
                viewerHasReacted
              }
            }
          }
        }
      }
    }
  }
`,Jl=`
  query SearchDiscussionLightweight($query: String!) {
    search(query: $query, type: DISCUSSION, first: 1) {
      nodes {
        ... on Discussion {
          id
          title
          url
          comments(first: 100) {
            nodes {
              id
              body
              author {
                login
                avatarUrl
              }
            }
          }
        }
      }
    }
  }
`,Zl=`
  query GetCommentDetail($id: ID!) {
    node(id: $id) {
      ... on DiscussionComment {
        id
        body
        createdAt
        author {
          login
          avatarUrl
        }
        replies(first: 50) {
          nodes {
            id
            body
            createdAt
            author {
              login
              avatarUrl
            }
            reactionGroups {
              content
              users(first: 0) { totalCount }
              viewerHasReacted
            }
          }
        }
        reactionGroups {
          content
          users(first: 0) { totalCount }
          viewerHasReacted
        }
      }
    }
  }
`,Xl=`
  query GetCategoryId($owner: String!, $name: String!, $slug: String!) {
    repository(owner: $owner, name: $name) {
      id
      discussionCategory(slug: $slug) {
        id
      }
      discussionCategories(first: 25) {
        nodes {
          id
          name
          slug
        }
      }
    }
  }
`,Ql=`
  mutation CreateDiscussion($repositoryId: ID!, $categoryId: ID!, $title: String!, $body: String!) {
    createDiscussion(input: { repositoryId: $repositoryId, categoryId: $categoryId, title: $title, body: $body }) {
      discussion {
        id
        title
        url
      }
    }
  }
`,ed=`
  mutation AddComment($discussionId: ID!, $body: String!) {
    addDiscussionComment(input: { discussionId: $discussionId, body: $body }) {
      comment {
        id
        body
        createdAt
        author {
          login
          avatarUrl
        }
      }
    }
  }
`,td=`
  mutation AddReply($discussionId: ID!, $replyToId: ID!, $body: String!) {
    addDiscussionComment(input: { discussionId: $discussionId, body: $body, replyToId: $replyToId }) {
      comment {
        id
        body
        createdAt
        author {
          login
          avatarUrl
        }
      }
    }
  }
`,vt=`
  mutation UpdateComment($commentId: ID!, $body: String!) {
    updateDiscussionComment(input: { commentId: $commentId, body: $body }) {
      comment {
        id
        body
      }
    }
  }
`,nd=`
  mutation DeleteComment($commentId: ID!) {
    deleteDiscussionComment(input: { id: $commentId }) {
      comment {
        id
      }
    }
  }
`,rd=`
  mutation AddReaction($subjectId: ID!, $content: ReactionContent!) {
    addReaction(input: { subjectId: $subjectId, content: $content }) {
      reaction {
        content
      }
    }
  }
`,sd=`
  mutation RemoveReaction($subjectId: ID!, $content: ReactionContent!) {
    removeReaction(input: { subjectId: $subjectId, content: $content }) {
      reaction {
        content
      }
    }
  }
`,od=`
  query ListDiscussions($owner: String!, $name: String!, $categoryId: ID!) {
    repository(owner: $owner, name: $name) {
      discussions(first: 50, categoryId: $categoryId) {
        nodes {
          id
          title
          body
          url
          createdAt
          comments {
            totalCount
          }
        }
      }
    }
  }
`;async function id(e){const t=tn(),r=`"${`Comments: ${e}`}" in:title repo:${t.repo.owner}/${t.repo.name}`,i=(await D(Yl,{query:r})).search?.nodes?.[0];if(!i)return null;const a=(i.comments?.nodes??[]).map(c=>{const{meta:l,text:d}=oe(c.body);return{...c,meta:l,text:d,replies:(c.replies?.nodes??[]).map(u=>{const{meta:f,text:p}=oe(u.body);return{...u,meta:f,text:p}})}});return{...i,comments:a}}async function ad(e){const t=tn(),r=`"${`Comments: ${e}`}" in:title repo:${t.repo.owner}/${t.repo.name}`,i=(await D(Jl,{query:r})).search?.nodes?.[0];if(!i)return null;const a=(i.comments?.nodes??[]).map(c=>{const{meta:l,text:d}=oe(c.body);return{...c,meta:l,text:d}});return{...i,comments:a}}async function Co(e){const n=(await D(Zl,{id:e})).node;if(!n)return null;const{meta:r,text:s}=oe(n.body),i=(n.replies?.nodes??[]).map(a=>{const{meta:c,text:l}=oe(a.body);return{...a,meta:c,text:l}});return{...n,meta:r,text:s,replies:i}}async function Eo(){const e=tn(),t=e.discussions.category.toLowerCase().replace(/\s+/g,"-"),n=await D(Xl,{owner:e.repo.owner,name:e.repo.name,slug:t}),r=n.repository?.id;let s=n.repository?.discussionCategory?.id;if(s||(s=n.repository?.discussionCategories?.nodes?.find(a=>a.name===e.discussions.category)?.id),!r||!s)throw new Error(`Could not find repository or discussion category "${e.discussions.category}" in ${e.repo.owner}/${e.repo.name}`);return{repositoryId:r,categoryId:s}}async function cd(e,t,n,r){let s=await id(e);if(!s){const{repositoryId:c,categoryId:l}=await Eo(),d=`Comments: ${e}`,u=We({route:e,createdAt:new Date().toISOString()},"");s=(await D(Ql,{repositoryId:c,categoryId:l,title:d,body:u})).createDiscussion.discussion}const i=We({x:Math.round(t*10)/10,y:Math.round(n*10)/10},r);return(await D(ed,{discussionId:s.id,body:i})).addDiscussionComment.comment}async function ld(e,t,n){return(await D(td,{discussionId:e,replyToId:t,body:n})).addDiscussionComment.comment}async function dd(e,t){const{meta:n,text:r}=oe(t),s={...n,resolved:!0},i=r.startsWith("(Resolved) ")?r:`(Resolved) ${r}`,a=We(s,i);return(await D(vt,{commentId:e,body:a})).updateDiscussionComment.comment}async function ud(e,t){const{meta:n,text:r}=oe(t),s={...n};delete s.resolved;const i=r.replace(/^\(Resolved\)\s*/,""),a=We(s,i);return(await D(vt,{commentId:e,body:a})).updateDiscussionComment.comment}async function fd(e,t,n){const{meta:r}=oe(t),s=r?We(r,n):n;return(await D(vt,{commentId:e,body:s})).updateDiscussionComment.comment}async function pd(e,t){return(await D(vt,{commentId:e,body:t})).updateDiscussionComment.comment}async function hd(e,t,n,r){const s=Vl(t,{x:Math.round(n*10)/10,y:Math.round(r*10)/10});return(await D(vt,{commentId:e,body:s})).updateDiscussionComment.comment}async function md(e){await D(nd,{commentId:e})}async function Ss(e,t){await D(rd,{subjectId:e,content:t})}async function Cs(e,t){await D(sd,{subjectId:e,content:t})}async function Xf(){const e=tn(),{categoryId:t}=await Eo();return(await D(od,{owner:e.repo.owner,name:e.repo.name,categoryId:t})).repository?.discussions?.nodes??[]}const Ft="sb-comments:",gd=120*1e3;function bd(e){try{const t=localStorage.getItem(Ft+e);if(!t)return null;const n=JSON.parse(t);return Date.now()-n.ts>gd?(localStorage.removeItem(Ft+e),null):n.data}catch{return null}}function vd(e,t){try{localStorage.setItem(Ft+e,JSON.stringify({ts:Date.now(),data:t}))}catch{}}function Ao(e){try{localStorage.removeItem(Ft+e)}catch{}}var Pn=!1,Mn=!1,Se=[],Nn=-1,xr=!1;function xd(e){wd(e)}function yd(){xr=!0}function _d(){xr=!1,Ro()}function wd(e){Se.includes(e)||Se.push(e),Ro()}function jd(e){let t=Se.indexOf(e);t!==-1&&t>Nn&&Se.splice(t,1)}function Ro(){if(!Mn&&!Pn){if(xr)return;Pn=!0,queueMicrotask(Sd)}}function Sd(){Pn=!1,Mn=!0;for(let e=0;e<Se.length;e++)Se[e](),Nn=e;Se.length=0,Nn=-1,Mn=!1}var Ge,$e,Ye,Io,Ln=!0;function Cd(e){Ln=!1,e(),Ln=!0}function Ed(e){Ge=e.reactive,Ye=e.release,$e=t=>e.effect(t,{scheduler:n=>{Ln?xd(n):n()}}),Io=e.raw}function Es(e){$e=e}function Ad(e){let t=()=>{};return[r=>{let s=$e(r);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(i=>i())}),e._x_effects.add(s),t=()=>{s!==void 0&&(e._x_effects.delete(s),Ye(s))},s},()=>{t()}]}function ko(e,t){let n=!0,r,s=$e(()=>{let i=e();if(JSON.stringify(i),!n&&(typeof i=="object"||i!==r)){let a=r;queueMicrotask(()=>{t(i,a)})}r=i,n=!1});return()=>Ye(s)}async function Rd(e){yd();try{await e(),await Promise.resolve()}finally{_d()}}var To=[],$o=[],Oo=[];function Id(e){Oo.push(e)}function yr(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,$o.push(t))}function Po(e){To.push(e)}function Mo(e,t,n){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(n)}function No(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([n,r])=>{(t===void 0||t.includes(n))&&(r.forEach(s=>s()),delete e._x_attributeCleanups[n])})}function kd(e){for(e._x_effects?.forEach(jd);e._x_cleanups?.length;)e._x_cleanups.pop()()}var _r=new MutationObserver(Cr),wr=!1;function jr(){_r.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),wr=!0}function Lo(){Td(),_r.disconnect(),wr=!1}var tt=[];function Td(){let e=_r.takeRecords();tt.push(()=>e.length>0&&Cr(e));let t=tt.length;queueMicrotask(()=>{if(tt.length===t)for(;tt.length>0;)tt.shift()()})}function T(e){if(!wr)return e();Lo();let t=e();return jr(),t}var Sr=!1,Ut=[];function $d(){Sr=!0}function Od(){Sr=!1,Cr(Ut),Ut=[]}function Cr(e){if(Sr){Ut=Ut.concat(e);return}let t=[],n=new Set,r=new Map,s=new Map;for(let i=0;i<e.length;i++)if(!e[i].target._x_ignoreMutationObserver&&(e[i].type==="childList"&&(e[i].removedNodes.forEach(a=>{a.nodeType===1&&a._x_marker&&n.add(a)}),e[i].addedNodes.forEach(a=>{if(a.nodeType===1){if(n.has(a)){n.delete(a);return}a._x_marker||t.push(a)}})),e[i].type==="attributes")){let a=e[i].target,c=e[i].attributeName,l=e[i].oldValue,d=()=>{r.has(a)||r.set(a,[]),r.get(a).push({name:c,value:a.getAttribute(c)})},u=()=>{s.has(a)||s.set(a,[]),s.get(a).push(c)};a.hasAttribute(c)&&l===null?d():a.hasAttribute(c)?(u(),d()):u()}s.forEach((i,a)=>{No(a,i)}),r.forEach((i,a)=>{To.forEach(c=>c(a,i))});for(let i of n)t.some(a=>a.contains(i))||$o.forEach(a=>a(i));for(let i of t)i.isConnected&&Oo.forEach(a=>a(i));t=null,n=null,r=null,s=null}function Do(e){return Ie(Re(e))}function xt(e,t,n){return e._x_dataStack=[t,...Re(n||e)],()=>{e._x_dataStack=e._x_dataStack.filter(r=>r!==t)}}function Re(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?Re(e.host):e.parentNode?Re(e.parentNode):[]}function Ie(e){return new Proxy({objects:e},Pd)}var Pd={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(n=>Object.prototype.hasOwnProperty.call(n,t)||Reflect.has(n,t))},get({objects:e},t,n){return t=="toJSON"?Md:Reflect.get(e.find(r=>Reflect.has(r,t))||{},t,n)},set({objects:e},t,n,r){const s=e.find(a=>Object.prototype.hasOwnProperty.call(a,t))||e[e.length-1],i=Object.getOwnPropertyDescriptor(s,t);return i?.set&&i?.get?i.set.call(r,n)||!0:Reflect.set(s,t,n)}};function Md(){return Reflect.ownKeys(this).reduce((t,n)=>(t[n]=Reflect.get(this,n),t),{})}function Er(e){let t=r=>typeof r=="object"&&!Array.isArray(r)&&r!==null,n=(r,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(r)).forEach(([i,{value:a,enumerable:c}])=>{if(c===!1||a===void 0||typeof a=="object"&&a!==null&&a.__v_skip)return;let l=s===""?i:`${s}.${i}`;typeof a=="object"&&a!==null&&a._x_interceptor?r[i]=a.initialize(e,l,i):t(a)&&a!==r&&!(a instanceof Element)&&n(a,l)})};return n(e)}function zo(e,t=()=>{}){let n={initialValue:void 0,_x_interceptor:!0,initialize(r,s,i){return e(this.initialValue,()=>Nd(r,s),a=>Dn(r,s,a),s,i)}};return t(n),r=>{if(typeof r=="object"&&r!==null&&r._x_interceptor){let s=n.initialize.bind(n);n.initialize=(i,a,c)=>{let l=r.initialize(i,a,c);return n.initialValue=l,s(i,a,c)}}else n.initialValue=r;return n}}function Nd(e,t){return t.split(".").reduce((n,r)=>n[r],e)}function Dn(e,t,n){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=n;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),Dn(e[t[0]],t.slice(1),n)}}var Bo={};function V(e,t){Bo[e]=t}function ft(e,t){let n=Ld(t);return Object.entries(Bo).forEach(([r,s])=>{Object.defineProperty(e,`$${r}`,{get(){return s(t,n)},enumerable:!1})}),e}function Ld(e){let[t,n]=Go(e),r={interceptor:zo,...t};return yr(e,n),r}function Dd(e,t,n,...r){try{return n(...r)}catch(s){pt(s,e,t)}}function pt(...e){return Ho(...e)}var Ho=Bd;function zd(e){Ho=e}function Bd(e,t,n=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:n}),console.warn(`Alpine Expression Error: ${e.message}

${n?'Expression: "'+n+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var Ue=!0;function Fo(e){let t=Ue;Ue=!1;let n=e();return Ue=t,n}function Ce(e,t,n={}){let r;return B(e,t)(s=>r=s,n),r}function B(...e){return Uo(...e)}var Uo=Wo;function Hd(e){Uo=e}var qo;function Fd(e){qo=e}function Wo(e,t){let n={};ft(n,e);let r=[n,...Re(e)],s=typeof t=="function"?Ud(r,t):Wd(r,t,e);return Dd.bind(null,e,t,s)}function Ud(e,t){return(n=()=>{},{scope:r={},params:s=[],context:i}={})=>{if(!Ue){ht(n,t,Ie([r,...e]),s);return}let a=t.apply(Ie([r,...e]),s);ht(n,a)}}var jn={};function qd(e,t){if(jn[e])return jn[e];let n=Object.getPrototypeOf(async function(){}).constructor,r=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,i=(()=>{try{let a=new n(["__self","scope"],`with (scope) { __self.result = ${r} }; __self.finished = true; return __self.result;`);return Object.defineProperty(a,"name",{value:`[Alpine] ${e}`}),a}catch(a){return pt(a,t,e),Promise.resolve()}})();return jn[e]=i,i}function Wd(e,t,n){let r=qd(t,n);return(s=()=>{},{scope:i={},params:a=[],context:c}={})=>{r.result=void 0,r.finished=!1;let l=Ie([i,...e]);if(typeof r=="function"){let d=r.call(c,r,l).catch(u=>pt(u,n,t));r.finished?(ht(s,r.result,l,a,n),r.result=void 0):d.then(u=>{ht(s,u,l,a,n)}).catch(u=>pt(u,n,t)).finally(()=>r.result=void 0)}}}function ht(e,t,n,r,s){if(Ue&&typeof t=="function"){let i=t.apply(n,r);i instanceof Promise?i.then(a=>ht(e,a,n,r)).catch(a=>pt(a,s,t)):e(i)}else typeof t=="object"&&t instanceof Promise?t.then(i=>e(i)):e(t)}function Kd(...e){return qo(...e)}function Vd(e,t,n={}){let r={};ft(r,e);let s=[r,...Re(e)],i=Ie([n.scope??{},...s]),a=n.params??[];if(t.includes("await")){let c=Object.getPrototypeOf(async function(){}).constructor,l=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(async()=>{ ${t} })()`:t;return new c(["scope"],`with (scope) { let __result = ${l}; return __result }`).call(n.context,i)}else{let c=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t,d=new Function(["scope"],`with (scope) { let __result = ${c}; return __result }`).call(n.context,i);return typeof d=="function"&&Ue?d.apply(i,a):d}}var Ar="x-";function Je(e=""){return Ar+e}function Gd(e){Ar=e}var qt={};function M(e,t){return qt[e]=t,{before(n){if(!qt[n]){console.warn(String.raw`Cannot find directive \`${n}\`. \`${e}\` will use the default order of execution`);return}const r=we.indexOf(n);we.splice(r>=0?r:we.indexOf("DEFAULT"),0,e)}}}function Yd(e){return Object.keys(qt).includes(e)}function Rr(e,t,n){if(t=Array.from(t),e._x_virtualDirectives){let i=Object.entries(e._x_virtualDirectives).map(([c,l])=>({name:c,value:l})),a=Ko(i);i=i.map(c=>a.find(l=>l.name===c.name)?{name:`x-bind:${c.name}`,value:`"${c.value}"`}:c),t=t.concat(i)}let r={};return t.map(Zo((i,a)=>r[i]=a)).filter(Qo).map(Xd(r,n)).sort(Qd).map(i=>Zd(e,i))}function Ko(e){return Array.from(e).map(Zo()).filter(t=>!Qo(t))}var zn=!1,ot=new Map,Vo=Symbol();function Jd(e){zn=!0;let t=Symbol();Vo=t,ot.set(t,[]);let n=()=>{for(;ot.get(t).length;)ot.get(t).shift()();ot.delete(t)},r=()=>{zn=!1,n()};e(n),r()}function Go(e){let t=[],n=c=>t.push(c),[r,s]=Ad(e);return t.push(s),[{Alpine:Xe,effect:r,cleanup:n,evaluateLater:B.bind(B,e),evaluate:Ce.bind(Ce,e)},()=>t.forEach(c=>c())]}function Zd(e,t){let n=()=>{},r=qt[t.type]||n,[s,i]=Go(e);Mo(e,t.original,i);let a=()=>{e._x_ignore||e._x_ignoreSelf||(r.inline&&r.inline(e,t,s),r=r.bind(r,e,t,s),zn?ot.get(Vo).push(r):r())};return a.runCleanups=i,a}var Yo=(e,t)=>({name:n,value:r})=>(n.startsWith(e)&&(n=n.replace(e,t)),{name:n,value:r}),Jo=e=>e;function Zo(e=()=>{}){return({name:t,value:n})=>{let{name:r,value:s}=Xo.reduce((i,a)=>a(i),{name:t,value:n});return r!==t&&e(r,t),{name:r,value:s}}}var Xo=[];function Ir(e){Xo.push(e)}function Qo({name:e}){return ei().test(e)}var ei=()=>new RegExp(`^${Ar}([^:^.]+)\\b`);function Xd(e,t){return({name:n,value:r})=>{n===r&&(r="");let s=n.match(ei()),i=n.match(/:([a-zA-Z0-9\-_:]+)/),a=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],c=t||e[n]||n;return{type:s?s[1]:null,value:i?i[1]:null,modifiers:a.map(l=>l.replace(".","")),expression:r,original:c}}}var Bn="DEFAULT",we=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Bn,"teleport"];function Qd(e,t){let n=we.indexOf(e.type)===-1?Bn:e.type,r=we.indexOf(t.type)===-1?Bn:t.type;return we.indexOf(n)-we.indexOf(r)}function at(e,t,n={}){e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function ke(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(s=>ke(s,t));return}let n=!1;if(t(e,()=>n=!0),n)return;let r=e.firstElementChild;for(;r;)ke(r,t),r=r.nextElementSibling}function U(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var As=!1;function eu(){As&&U("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),As=!0,document.body||U("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),at(document,"alpine:init"),at(document,"alpine:initializing"),jr(),Id(t=>ie(t,ke)),yr(t=>Ze(t)),Po((t,n)=>{Rr(t,n).forEach(r=>r())});let e=t=>!nn(t.parentElement,!0);Array.from(document.querySelectorAll(ri().join(","))).filter(e).forEach(t=>{ie(t)}),at(document,"alpine:initialized"),setTimeout(()=>{su()})}var kr=[],ti=[];function ni(){return kr.map(e=>e())}function ri(){return kr.concat(ti).map(e=>e())}function si(e){kr.push(e)}function oi(e){ti.push(e)}function nn(e,t=!1){return Te(e,n=>{if((t?ri():ni()).some(s=>n.matches(s)))return!0})}function Te(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),e.parentNode instanceof ShadowRoot)return Te(e.parentNode.host,t);if(e.parentElement)return Te(e.parentElement,t)}}function tu(e){return ni().some(t=>e.matches(t))}var ii=[];function nu(e){ii.push(e)}var ru=1;function ie(e,t=ke,n=()=>{}){Te(e,r=>r._x_ignore)||Jd(()=>{t(e,(r,s)=>{r._x_marker||(n(r,s),ii.forEach(i=>i(r,s)),Rr(r,r.attributes).forEach(i=>i()),r._x_ignore||(r._x_marker=ru++),r._x_ignore&&s())})})}function Ze(e,t=ke){t(e,n=>{kd(n),No(n),delete n._x_marker})}function su(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,n,r])=>{Yd(n)||r.some(s=>{if(document.querySelector(s))return U(`found "${s}", but missing ${t} plugin`),!0})})}var Hn=[],Tr=!1;function $r(e=()=>{}){return queueMicrotask(()=>{Tr||setTimeout(()=>{Fn()})}),new Promise(t=>{Hn.push(()=>{e(),t()})})}function Fn(){for(Tr=!1;Hn.length;)Hn.shift()()}function ou(){Tr=!0}function Or(e,t){return Array.isArray(t)?Rs(e,t.join(" ")):typeof t=="object"&&t!==null?iu(e,t):typeof t=="function"?Or(e,t()):Rs(e,t)}function Rs(e,t){let n=s=>s.split(" ").filter(i=>!e.classList.contains(i)).filter(Boolean),r=s=>(e.classList.add(...s),()=>{e.classList.remove(...s)});return t=t===!0?t="":t||"",r(n(t))}function iu(e,t){let n=c=>c.split(" ").filter(Boolean),r=Object.entries(t).flatMap(([c,l])=>l?n(c):!1).filter(Boolean),s=Object.entries(t).flatMap(([c,l])=>l?!1:n(c)).filter(Boolean),i=[],a=[];return s.forEach(c=>{e.classList.contains(c)&&(e.classList.remove(c),a.push(c))}),r.forEach(c=>{e.classList.contains(c)||(e.classList.add(c),i.push(c))}),()=>{a.forEach(c=>e.classList.add(c)),i.forEach(c=>e.classList.remove(c))}}function rn(e,t){return typeof t=="object"&&t!==null?au(e,t):cu(e,t)}function au(e,t){let n={};return Object.entries(t).forEach(([r,s])=>{n[r]=e.style[r],r.startsWith("--")||(r=lu(r)),e.style.setProperty(r,s)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{rn(e,n)}}function cu(e,t){let n=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",n||"")}}function lu(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Un(e,t=()=>{}){let n=!1;return function(){n?t.apply(this,arguments):(n=!0,e.apply(this,arguments))}}M("transition",(e,{value:t,modifiers:n,expression:r},{evaluate:s})=>{typeof r=="function"&&(r=s(r)),r!==!1&&(!r||typeof r=="boolean"?uu(e,n,t):du(e,r,t))});function du(e,t,n){ai(e,Or,""),{enter:s=>{e._x_transition.enter.during=s},"enter-start":s=>{e._x_transition.enter.start=s},"enter-end":s=>{e._x_transition.enter.end=s},leave:s=>{e._x_transition.leave.during=s},"leave-start":s=>{e._x_transition.leave.start=s},"leave-end":s=>{e._x_transition.leave.end=s}}[n](t)}function uu(e,t,n){ai(e,rn);let r=!t.includes("in")&&!t.includes("out")&&!n,s=r||t.includes("in")||["enter"].includes(n),i=r||t.includes("out")||["leave"].includes(n);t.includes("in")&&!r&&(t=t.filter((x,y)=>y<t.indexOf("out"))),t.includes("out")&&!r&&(t=t.filter((x,y)=>y>t.indexOf("out")));let a=!t.includes("opacity")&&!t.includes("scale"),c=a||t.includes("opacity"),l=a||t.includes("scale"),d=c?0:1,u=l?nt(t,"scale",95)/100:1,f=nt(t,"delay",0)/1e3,p=nt(t,"origin","center"),v="opacity, transform",w=nt(t,"duration",150)/1e3,g=nt(t,"duration",75)/1e3,h="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(e._x_transition.enter.during={transformOrigin:p,transitionDelay:`${f}s`,transitionProperty:v,transitionDuration:`${w}s`,transitionTimingFunction:h},e._x_transition.enter.start={opacity:d,transform:`scale(${u})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),i&&(e._x_transition.leave.during={transformOrigin:p,transitionDelay:`${f}s`,transitionProperty:v,transitionDuration:`${g}s`,transitionTimingFunction:h},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:d,transform:`scale(${u})`})}function ai(e,t,n={}){e._x_transition||(e._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(r=()=>{},s=()=>{}){qn(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},r,s)},out(r=()=>{},s=()=>{}){qn(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},r,s)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,n,r){const s=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let i=()=>s(n);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(n):i():e._x_transition?e._x_transition.in(n):i();return}e._x_hidePromise=e._x_transition?new Promise((a,c)=>{e._x_transition.out(()=>{},()=>a(r)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>c({isFromCancelledTransition:!0}))}):Promise.resolve(r),queueMicrotask(()=>{let a=ci(e);a?(a._x_hideChildren||(a._x_hideChildren=[]),a._x_hideChildren.push(e)):s(()=>{let c=l=>{let d=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(c)]).then(([u])=>u?.());return delete l._x_hidePromise,delete l._x_hideChildren,d};c(e).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function ci(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:ci(t)}function qn(e,t,{during:n,start:r,end:s}={},i=()=>{},a=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(n).length===0&&Object.keys(r).length===0&&Object.keys(s).length===0){i(),a();return}let c,l,d;fu(e,{start(){c=t(e,r)},during(){l=t(e,n)},before:i,end(){c(),d=t(e,s)},after:a,cleanup(){l(),d()}})}function fu(e,t){let n,r,s,i=Un(()=>{T(()=>{n=!0,r||t.before(),s||(t.end(),Fn()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(a){this.beforeCancels.push(a)},cancel:Un(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();i()}),finish:i},T(()=>{t.start(),t.during()}),ou(),requestAnimationFrame(()=>{if(n)return;let a=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,c=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;a===0&&(a=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),T(()=>{t.before()}),r=!0,requestAnimationFrame(()=>{n||(T(()=>{t.end()}),Fn(),setTimeout(e._x_transitioning.finish,a+c),s=!0)})})}function nt(e,t,n){if(e.indexOf(t)===-1)return n;const r=e[e.indexOf(t)+1];if(!r||t==="scale"&&isNaN(r))return n;if(t==="duration"||t==="delay"){let s=r.match(/([0-9]+)ms/);if(s)return s[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[r,e[e.indexOf(t)+2]].join(" "):r}var he=!1;function ge(e,t=()=>{}){return(...n)=>he?t(...n):e(...n)}function pu(e){return(...t)=>he&&e(...t)}var li=[];function sn(e){li.push(e)}function hu(e,t){li.forEach(n=>n(e,t)),he=!0,di(()=>{ie(t,(n,r)=>{r(n,()=>{})})}),he=!1}var Wn=!1;function mu(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),he=!0,Wn=!0,di(()=>{gu(t)}),he=!1,Wn=!1}function gu(e){let t=!1;ie(e,(r,s)=>{ke(r,(i,a)=>{if(t&&tu(i))return a();t=!0,s(i,a)})})}function di(e){let t=$e;Es((n,r)=>{let s=t(n);return Ye(s),()=>{}}),e(),Es(t)}function ui(e,t,n,r=[]){switch(e._x_bindings||(e._x_bindings=Ge({})),e._x_bindings[t]=n,t=r.includes("camel")?Su(t):t,t){case"value":bu(e,n);break;case"style":xu(e,n);break;case"class":vu(e,n);break;case"selected":case"checked":yu(e,t,n);break;default:fi(e,t,n);break}}function bu(e,t){if(mi(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=$t(e.value)===t:e.checked=Is(e.value,t));else if(Pr(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(n=>Is(n,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")ju(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function vu(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=Or(e,t)}function xu(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=rn(e,t)}function yu(e,t,n){fi(e,t,n),wu(e,t,n)}function fi(e,t,n){[null,void 0,!1].includes(n)&&Eu(t)?e.removeAttribute(t):(pi(t)&&(n=t),_u(e,t,n))}function _u(e,t,n){e.getAttribute(t)!=n&&e.setAttribute(t,n)}function wu(e,t,n){e[t]!==n&&(e[t]=n)}function ju(e,t){const n=[].concat(t).map(r=>r+"");Array.from(e.options).forEach(r=>{r.selected=n.includes(r.value)})}function Su(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function Is(e,t){return e==t}function $t(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var Cu=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function pi(e){return Cu.has(e)}function Eu(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function Au(e,t,n){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:hi(e,t,n)}function Ru(e,t,n,r=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let s=e._x_inlineBindings[t];return s.extract=r,Fo(()=>Ce(e,s.expression))}return hi(e,t,n)}function hi(e,t,n){let r=e.getAttribute(t);return r===null?typeof n=="function"?n():n:r===""?!0:pi(t)?!![t,"true"].includes(r):r}function Pr(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function mi(e){return e.type==="radio"||e.localName==="ui-radio"}function gi(e,t){let n;return function(){const r=this,s=arguments,i=function(){n=null,e.apply(r,s)};clearTimeout(n),n=setTimeout(i,t)}}function bi(e,t){let n;return function(){let r=this,s=arguments;n||(e.apply(r,s),n=!0,setTimeout(()=>n=!1,t))}}function vi({get:e,set:t},{get:n,set:r}){let s=!0,i,a=$e(()=>{let c=e(),l=n();if(s)r(Sn(c)),s=!1;else{let d=JSON.stringify(c),u=JSON.stringify(l);d!==i?r(Sn(c)):d!==u&&t(Sn(l))}i=JSON.stringify(e()),JSON.stringify(n())});return()=>{Ye(a)}}function Sn(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function Iu(e){(Array.isArray(e)?e:[e]).forEach(n=>n(Xe))}var ye={},ks=!1;function ku(e,t){if(ks||(ye=Ge(ye),ks=!0),t===void 0)return ye[e];ye[e]=t,Er(ye[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&ye[e].init()}function Tu(){return ye}var xi={};function $u(e,t){let n=typeof t!="function"?()=>t:t;return e instanceof Element?yi(e,n()):(xi[e]=n,()=>{})}function Ou(e){return Object.entries(xi).forEach(([t,n])=>{Object.defineProperty(e,t,{get(){return(...r)=>n(...r)}})}),e}function yi(e,t,n){let r=[];for(;r.length;)r.pop()();let s=Object.entries(t).map(([a,c])=>({name:a,value:c})),i=Ko(s);return s=s.map(a=>i.find(c=>c.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),Rr(e,s,n).map(a=>{r.push(a.runCleanups),a()}),()=>{for(;r.length;)r.pop()()}}var _i={};function Pu(e,t){_i[e]=t}function Mu(e,t){return Object.entries(_i).forEach(([n,r])=>{Object.defineProperty(e,n,{get(){return(...s)=>r.bind(t)(...s)},enumerable:!1})}),e}var Nu={get reactive(){return Ge},get release(){return Ye},get effect(){return $e},get raw(){return Io},get transaction(){return Rd},version:"3.15.8",flushAndStopDeferringMutations:Od,dontAutoEvaluateFunctions:Fo,disableEffectScheduling:Cd,startObservingMutations:jr,stopObservingMutations:Lo,setReactivityEngine:Ed,onAttributeRemoved:Mo,onAttributesAdded:Po,closestDataStack:Re,skipDuringClone:ge,onlyDuringClone:pu,addRootSelector:si,addInitSelector:oi,setErrorHandler:zd,interceptClone:sn,addScopeToNode:xt,deferMutations:$d,mapAttributes:Ir,evaluateLater:B,interceptInit:nu,initInterceptors:Er,injectMagics:ft,setEvaluator:Hd,setRawEvaluator:Fd,mergeProxies:Ie,extractProp:Ru,findClosest:Te,onElRemoved:yr,closestRoot:nn,destroyTree:Ze,interceptor:zo,transition:qn,setStyles:rn,mutateDom:T,directive:M,entangle:vi,throttle:bi,debounce:gi,evaluate:Ce,evaluateRaw:Kd,initTree:ie,nextTick:$r,prefixed:Je,prefix:Gd,plugin:Iu,magic:V,store:ku,start:eu,clone:mu,cloneNode:hu,bound:Au,$data:Do,watch:ko,walk:ke,data:Pu,bind:$u},Xe=Nu;function Lu(e,t){const n=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return s=>!!n[s]}var Du=Object.freeze({}),zu=Object.prototype.hasOwnProperty,on=(e,t)=>zu.call(e,t),Ee=Array.isArray,ct=e=>wi(e)==="[object Map]",Bu=e=>typeof e=="string",Mr=e=>typeof e=="symbol",an=e=>e!==null&&typeof e=="object",Hu=Object.prototype.toString,wi=e=>Hu.call(e),ji=e=>wi(e).slice(8,-1),Nr=e=>Bu(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Fu=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Uu=Fu(e=>e.charAt(0).toUpperCase()+e.slice(1)),Si=(e,t)=>e!==t&&(e===e||t===t),Kn=new WeakMap,rt=[],Y,Ae=Symbol("iterate"),Vn=Symbol("Map key iterate");function qu(e){return e&&e._isEffect===!0}function Wu(e,t=Du){qu(e)&&(e=e.raw);const n=Gu(e,t);return t.lazy||n(),n}function Ku(e){e.active&&(Ci(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var Vu=0;function Gu(e,t){const n=function(){if(!n.active)return e();if(!rt.includes(n)){Ci(n);try{return Ju(),rt.push(n),Y=n,e()}finally{rt.pop(),Ei(),Y=rt[rt.length-1]}}};return n.id=Vu++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}function Ci(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var Ke=!0,Lr=[];function Yu(){Lr.push(Ke),Ke=!1}function Ju(){Lr.push(Ke),Ke=!0}function Ei(){const e=Lr.pop();Ke=e===void 0?!0:e}function K(e,t,n){if(!Ke||Y===void 0)return;let r=Kn.get(e);r||Kn.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=new Set),s.has(Y)||(s.add(Y),Y.deps.push(s),Y.options.onTrack&&Y.options.onTrack({effect:Y,target:e,type:t,key:n}))}function me(e,t,n,r,s,i){const a=Kn.get(e);if(!a)return;const c=new Set,l=u=>{u&&u.forEach(f=>{(f!==Y||f.allowRecurse)&&c.add(f)})};if(t==="clear")a.forEach(l);else if(n==="length"&&Ee(e))a.forEach((u,f)=>{(f==="length"||f>=r)&&l(u)});else switch(n!==void 0&&l(a.get(n)),t){case"add":Ee(e)?Nr(n)&&l(a.get("length")):(l(a.get(Ae)),ct(e)&&l(a.get(Vn)));break;case"delete":Ee(e)||(l(a.get(Ae)),ct(e)&&l(a.get(Vn)));break;case"set":ct(e)&&l(a.get(Ae));break}const d=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:e,key:n,type:t,newValue:r,oldValue:s,oldTarget:i}),u.options.scheduler?u.options.scheduler(u):u()};c.forEach(d)}var Zu=Lu("__proto__,__v_isRef,__isVue"),Ai=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Mr)),Xu=Ri(),Qu=Ri(!0),Ts=ef();function ef(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=k(this);for(let i=0,a=this.length;i<a;i++)K(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(k)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Yu();const r=k(this)[t].apply(this,n);return Ei(),r}}),e}function Ri(e=!1,t=!1){return function(r,s,i){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&i===(e?t?mf:$i:t?hf:Ti).get(r))return r;const a=Ee(r);if(!e&&a&&on(Ts,s))return Reflect.get(Ts,s,i);const c=Reflect.get(r,s,i);return(Mr(s)?Ai.has(s):Zu(s))||(e||K(r,"get",s),t)?c:Gn(c)?!a||!Nr(s)?c.value:c:an(c)?e?Oi(c):Hr(c):c}}var tf=nf();function nf(e=!1){return function(n,r,s,i){let a=n[r];if(!e&&(s=k(s),a=k(a),!Ee(n)&&Gn(a)&&!Gn(s)))return a.value=s,!0;const c=Ee(n)&&Nr(r)?Number(r)<n.length:on(n,r),l=Reflect.set(n,r,s,i);return n===k(i)&&(c?Si(s,a)&&me(n,"set",r,s,a):me(n,"add",r,s)),l}}function rf(e,t){const n=on(e,t),r=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&me(e,"delete",t,void 0,r),s}function sf(e,t){const n=Reflect.has(e,t);return(!Mr(t)||!Ai.has(t))&&K(e,"has",t),n}function of(e){return K(e,"iterate",Ee(e)?"length":Ae),Reflect.ownKeys(e)}var af={get:Xu,set:tf,deleteProperty:rf,has:sf,ownKeys:of},cf={get:Qu,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},Dr=e=>an(e)?Hr(e):e,zr=e=>an(e)?Oi(e):e,Br=e=>e,cn=e=>Reflect.getPrototypeOf(e);function Ct(e,t,n=!1,r=!1){e=e.__v_raw;const s=k(e),i=k(t);t!==i&&!n&&K(s,"get",t),!n&&K(s,"get",i);const{has:a}=cn(s),c=r?Br:n?zr:Dr;if(a.call(s,t))return c(e.get(t));if(a.call(s,i))return c(e.get(i));e!==s&&e.get(t)}function Et(e,t=!1){const n=this.__v_raw,r=k(n),s=k(e);return e!==s&&!t&&K(r,"has",e),!t&&K(r,"has",s),e===s?n.has(e):n.has(e)||n.has(s)}function At(e,t=!1){return e=e.__v_raw,!t&&K(k(e),"iterate",Ae),Reflect.get(e,"size",e)}function $s(e){e=k(e);const t=k(this);return cn(t).has.call(t,e)||(t.add(e),me(t,"add",e,e)),this}function Os(e,t){t=k(t);const n=k(this),{has:r,get:s}=cn(n);let i=r.call(n,e);i?ki(n,r,e):(e=k(e),i=r.call(n,e));const a=s.call(n,e);return n.set(e,t),i?Si(t,a)&&me(n,"set",e,t,a):me(n,"add",e,t),this}function Ps(e){const t=k(this),{has:n,get:r}=cn(t);let s=n.call(t,e);s?ki(t,n,e):(e=k(e),s=n.call(t,e));const i=r?r.call(t,e):void 0,a=t.delete(e);return s&&me(t,"delete",e,void 0,i),a}function Ms(){const e=k(this),t=e.size!==0,n=ct(e)?new Map(e):new Set(e),r=e.clear();return t&&me(e,"clear",void 0,void 0,n),r}function Rt(e,t){return function(r,s){const i=this,a=i.__v_raw,c=k(a),l=t?Br:e?zr:Dr;return!e&&K(c,"iterate",Ae),a.forEach((d,u)=>r.call(s,l(d),l(u),i))}}function It(e,t,n){return function(...r){const s=this.__v_raw,i=k(s),a=ct(i),c=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,d=s[e](...r),u=n?Br:t?zr:Dr;return!t&&K(i,"iterate",l?Vn:Ae),{next(){const{value:f,done:p}=d.next();return p?{value:f,done:p}:{value:c?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function de(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${Uu(e)} operation ${n}failed: target is readonly.`,k(this))}return e==="delete"?!1:this}}function lf(){const e={get(i){return Ct(this,i)},get size(){return At(this)},has:Et,add:$s,set:Os,delete:Ps,clear:Ms,forEach:Rt(!1,!1)},t={get(i){return Ct(this,i,!1,!0)},get size(){return At(this)},has:Et,add:$s,set:Os,delete:Ps,clear:Ms,forEach:Rt(!1,!0)},n={get(i){return Ct(this,i,!0)},get size(){return At(this,!0)},has(i){return Et.call(this,i,!0)},add:de("add"),set:de("set"),delete:de("delete"),clear:de("clear"),forEach:Rt(!0,!1)},r={get(i){return Ct(this,i,!0,!0)},get size(){return At(this,!0)},has(i){return Et.call(this,i,!0)},add:de("add"),set:de("set"),delete:de("delete"),clear:de("clear"),forEach:Rt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=It(i,!1,!1),n[i]=It(i,!0,!1),t[i]=It(i,!1,!0),r[i]=It(i,!0,!0)}),[e,n,t,r]}var[df,uf]=lf();function Ii(e,t){const n=e?uf:df;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(on(n,s)&&s in r?n:r,s,i)}var ff={get:Ii(!1)},pf={get:Ii(!0)};function ki(e,t,n){const r=k(n);if(r!==n&&t.call(e,r)){const s=ji(e);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Ti=new WeakMap,hf=new WeakMap,$i=new WeakMap,mf=new WeakMap;function gf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bf(e){return e.__v_skip||!Object.isExtensible(e)?0:gf(ji(e))}function Hr(e){return e&&e.__v_isReadonly?e:Pi(e,!1,af,ff,Ti)}function Oi(e){return Pi(e,!0,cf,pf,$i)}function Pi(e,t,n,r,s){if(!an(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const a=bf(e);if(a===0)return e;const c=new Proxy(e,a===2?r:n);return s.set(e,c),c}function k(e){return e&&k(e.__v_raw)||e}function Gn(e){return!!(e&&e.__v_isRef===!0)}V("nextTick",()=>$r);V("dispatch",e=>at.bind(at,e));V("watch",(e,{evaluateLater:t,cleanup:n})=>(r,s)=>{let i=t(r),c=ko(()=>{let l;return i(d=>l=d),l},s);n(c)});V("store",Tu);V("data",e=>Do(e));V("root",e=>nn(e));V("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=Ie(vf(e))),e._x_refs_proxy));function vf(e){let t=[];return Te(e,n=>{n._x_refs&&t.push(n._x_refs)}),t}var Cn={};function Mi(e){return Cn[e]||(Cn[e]=0),++Cn[e]}function xf(e,t){return Te(e,n=>{if(n._x_ids&&n._x_ids[t])return!0})}function yf(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=Mi(t))}V("id",(e,{cleanup:t})=>(n,r=null)=>{let s=`${n}${r?`-${r}`:""}`;return _f(e,s,t,()=>{let i=xf(e,n),a=i?i._x_ids[n]:Mi(n);return r?`${n}-${a}-${r}`:`${n}-${a}`})});sn((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function _f(e,t,n,r){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let s=r();return e._x_id[t]=s,n(()=>{delete e._x_id[t]}),s}V("el",e=>e);Ni("Focus","focus","focus");Ni("Persist","persist","persist");function Ni(e,t,n){V(t,r=>U(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}M("modelable",(e,{expression:t},{effect:n,evaluateLater:r,cleanup:s})=>{let i=r(t),a=()=>{let u;return i(f=>u=f),u},c=r(`${t} = __placeholder`),l=u=>c(()=>{},{scope:{__placeholder:u}}),d=a();l(d),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let u=e._x_model.get,f=e._x_model.set,p=vi({get(){return u()},set(v){f(v)}},{get(){return a()},set(v){l(v)}});s(p)})});M("teleport",(e,{modifiers:t,expression:n},{cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&U("x-teleport can only be used on a <template> tag",e);let s=Ns(n),i=e.content.cloneNode(!0).firstElementChild;e._x_teleport=i,i._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),i.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(c=>{i.addEventListener(c,l=>{l.stopPropagation(),e.dispatchEvent(new l.constructor(l.type,l))})}),xt(i,{},e);let a=(c,l,d)=>{d.includes("prepend")?l.parentNode.insertBefore(c,l):d.includes("append")?l.parentNode.insertBefore(c,l.nextSibling):l.appendChild(c)};T(()=>{a(i,s,t),ge(()=>{ie(i)})()}),e._x_teleportPutBack=()=>{let c=Ns(n);T(()=>{a(e._x_teleport,c,t)})},r(()=>T(()=>{i.remove(),Ze(i)}))});var wf=document.createElement("div");function Ns(e){let t=ge(()=>document.querySelector(e),()=>wf)();return t||U(`Cannot find x-teleport element for selector: "${e}"`),t}var Li=()=>{};Li.inline=(e,{modifiers:t},{cleanup:n})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,n(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};M("ignore",Li);M("effect",ge((e,{expression:t},{effect:n})=>{n(B(e,t))}));function Me(e,t,n,r){let s=e,i=l=>r(l),a={},c=(l,d)=>u=>d(l,u);if(n.includes("dot")&&(t=jf(t)),n.includes("camel")&&(t=Sf(t)),n.includes("passive")&&(a.passive=!0),n.includes("capture")&&(a.capture=!0),n.includes("window")&&(s=window),n.includes("document")&&(s=document),n.includes("debounce")){let l=n[n.indexOf("debounce")+1]||"invalid-wait",d=Wt(l.split("ms")[0])?Number(l.split("ms")[0]):250;i=gi(i,d)}if(n.includes("throttle")){let l=n[n.indexOf("throttle")+1]||"invalid-wait",d=Wt(l.split("ms")[0])?Number(l.split("ms")[0]):250;i=bi(i,d)}return n.includes("prevent")&&(i=c(i,(l,d)=>{d.preventDefault(),l(d)})),n.includes("stop")&&(i=c(i,(l,d)=>{d.stopPropagation(),l(d)})),n.includes("once")&&(i=c(i,(l,d)=>{l(d),s.removeEventListener(t,i,a)})),(n.includes("away")||n.includes("outside"))&&(s=document,i=c(i,(l,d)=>{e.contains(d.target)||d.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&l(d))})),n.includes("self")&&(i=c(i,(l,d)=>{d.target===e&&l(d)})),t==="submit"&&(i=c(i,(l,d)=>{d.target._x_pendingModelUpdates&&d.target._x_pendingModelUpdates.forEach(u=>u()),l(d)})),(Ef(t)||Di(t))&&(i=c(i,(l,d)=>{Af(d,n)||l(d)})),s.addEventListener(t,i,a),()=>{s.removeEventListener(t,i,a)}}function jf(e){return e.replace(/-/g,".")}function Sf(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function Wt(e){return!Array.isArray(e)&&!isNaN(e)}function Cf(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Ef(e){return["keydown","keyup"].includes(e)}function Di(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function Af(e,t){let n=t.filter(i=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll","blur","change","lazy"].includes(i));if(n.includes("debounce")){let i=n.indexOf("debounce");n.splice(i,Wt((n[i+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let i=n.indexOf("throttle");n.splice(i,Wt((n[i+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.length===0||n.length===1&&Ls(e.key).includes(n[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(i=>n.includes(i));return n=n.filter(i=>!s.includes(i)),!(s.length>0&&s.filter(a=>((a==="cmd"||a==="super")&&(a="meta"),e[`${a}Key`])).length===s.length&&(Di(e.type)||Ls(e.key).includes(n[0])))}function Ls(e){if(!e)return[];e=Cf(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(n=>{if(t[n]===e)return n}).filter(n=>n)}M("model",(e,{modifiers:t,expression:n},{effect:r,cleanup:s})=>{let i=e;t.includes("parent")&&(i=e.parentNode);let a=B(i,n),c;typeof n=="string"?c=B(i,`${n} = __placeholder`):typeof n=="function"&&typeof n()=="string"?c=B(i,`${n()} = __placeholder`):c=()=>{};let l=()=>{let g;return a(h=>g=h),Ds(g)?g.get():g},d=g=>{let h;a(x=>h=x),Ds(h)?h.set(g):c(()=>{},{scope:{__placeholder:g}})};typeof n=="string"&&e.type==="radio"&&T(()=>{e.hasAttribute("name")||e.setAttribute("name",n)});let u=t.includes("change")||t.includes("lazy"),f=t.includes("blur"),p=t.includes("enter"),v=u||f||p,w;if(he)w=()=>{};else if(v){let g=[],h=x=>d(kt(e,t,x,l()));if(u&&g.push(Me(e,"change",t,h)),f&&(g.push(Me(e,"blur",t,h)),e.form)){let x=()=>h({target:e});e.form._x_pendingModelUpdates||(e.form._x_pendingModelUpdates=[]),e.form._x_pendingModelUpdates.push(x),s(()=>e.form._x_pendingModelUpdates.splice(e.form._x_pendingModelUpdates.indexOf(x),1))}p&&g.push(Me(e,"keydown",t,x=>{x.key==="Enter"&&h(x)})),w=()=>g.forEach(x=>x())}else{let g=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)?"change":"input";w=Me(e,g,t,h=>{d(kt(e,t,h,l()))})}if(t.includes("fill")&&([void 0,null,""].includes(l())||Pr(e)&&Array.isArray(l())||e.tagName.toLowerCase()==="select"&&e.multiple)&&d(kt(e,t,{target:e},l())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=w,s(()=>e._x_removeModelListeners.default()),e.form){let g=Me(e.form,"reset",[],h=>{$r(()=>e._x_model&&e._x_model.set(kt(e,t,{target:e},l())))});s(()=>g())}e._x_model={get(){return l()},set(g){d(g)}},e._x_forceModelUpdate=g=>{g===void 0&&typeof n=="string"&&n.match(/\./)&&(g=""),window.fromModel=!0,T(()=>ui(e,"value",g)),delete window.fromModel},r(()=>{let g=l();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(g)})});function kt(e,t,n,r){return T(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail!==null&&n.detail!==void 0?n.detail:n.target.value;if(Pr(e))if(Array.isArray(r)){let s=null;return t.includes("number")?s=En(n.target.value):t.includes("boolean")?s=$t(n.target.value):s=n.target.value,n.target.checked?r.includes(s)?r:r.concat([s]):r.filter(i=>!Rf(i,s))}else return n.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(n.target.selectedOptions).map(s=>{let i=s.value||s.text;return En(i)}):t.includes("boolean")?Array.from(n.target.selectedOptions).map(s=>{let i=s.value||s.text;return $t(i)}):Array.from(n.target.selectedOptions).map(s=>s.value||s.text);{let s;return mi(e)?n.target.checked?s=n.target.value:s=r:s=n.target.value,t.includes("number")?En(s):t.includes("boolean")?$t(s):t.includes("trim")?s.trim():s}}})}function En(e){let t=e?parseFloat(e):null;return If(t)?t:e}function Rf(e,t){return e==t}function If(e){return!Array.isArray(e)&&!isNaN(e)}function Ds(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}M("cloak",e=>queueMicrotask(()=>T(()=>e.removeAttribute(Je("cloak")))));oi(()=>`[${Je("init")}]`);M("init",ge((e,{expression:t},{evaluate:n})=>typeof t=="string"?!!t.trim()&&n(t,{},!1):n(t,{},!1)));M("text",(e,{expression:t},{effect:n,evaluateLater:r})=>{let s=r(t);n(()=>{s(i=>{T(()=>{e.textContent=i})})})});M("html",(e,{expression:t},{effect:n,evaluateLater:r})=>{let s=r(t);n(()=>{s(i=>{T(()=>{e.innerHTML=i,e._x_ignoreSelf=!0,ie(e),delete e._x_ignoreSelf})})})});Ir(Yo(":",Jo(Je("bind:"))));var zi=(e,{value:t,modifiers:n,expression:r,original:s},{effect:i,cleanup:a})=>{if(!t){let l={};Ou(l),B(e,r)(u=>{yi(e,u,s)},{scope:l});return}if(t==="key")return kf(e,r);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let c=B(e,r);i(()=>c(l=>{l===void 0&&typeof r=="string"&&r.match(/\./)&&(l=""),T(()=>ui(e,t,l,n))})),a(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};zi.inline=(e,{value:t,modifiers:n,expression:r})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:r,extract:!1})};M("bind",zi);function kf(e,t){e._x_keyExpression=t}si(()=>`[${Je("data")}]`);M("data",(e,{expression:t},{cleanup:n})=>{if(Tf(e))return;t=t===""?"{}":t;let r={};ft(r,e);let s={};Mu(s,r);let i=Ce(e,t,{scope:s});(i===void 0||i===!0)&&(i={}),ft(i,e);let a=Ge(i);Er(a);let c=xt(e,a);a.init&&Ce(e,a.init),n(()=>{a.destroy&&Ce(e,a.destroy),c()})});sn((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function Tf(e){return he?Wn?!0:e.hasAttribute("data-has-alpine-state"):!1}M("show",(e,{modifiers:t,expression:n},{effect:r})=>{let s=B(e,n);e._x_doHide||(e._x_doHide=()=>{T(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{T(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let i=()=>{e._x_doHide(),e._x_isShown=!1},a=()=>{e._x_doShow(),e._x_isShown=!0},c=()=>setTimeout(a),l=Un(f=>f?a():i(),f=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,f,a,i):f?c():i()}),d,u=!0;r(()=>s(f=>{!u&&f===d||(t.includes("immediate")&&(f?c():i()),l(f),d=f,u=!1)}))});M("for",(e,{expression:t},{effect:n,cleanup:r})=>{let s=Of(t),i=B(e,s.items),a=B(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},n(()=>$f(e,s,i,a)),r(()=>{Object.values(e._x_lookup).forEach(c=>T(()=>{Ze(c),c.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function $f(e,t,n,r){let s=a=>typeof a=="object"&&!Array.isArray(a),i=e;n(a=>{Pf(a)&&a>=0&&(a=Array.from(Array(a).keys(),h=>h+1)),a===void 0&&(a=[]);let c=e._x_lookup,l=e._x_prevKeys,d=[],u=[];if(s(a))a=Object.entries(a).map(([h,x])=>{let y=zs(t,x,h,a);r(_=>{u.includes(_)&&U("Duplicate key on x-for",e),u.push(_)},{scope:{index:h,...y}}),d.push(y)});else for(let h=0;h<a.length;h++){let x=zs(t,a[h],h,a);r(y=>{u.includes(y)&&U("Duplicate key on x-for",e),u.push(y)},{scope:{index:h,...x}}),d.push(x)}let f=[],p=[],v=[],w=[];for(let h=0;h<l.length;h++){let x=l[h];u.indexOf(x)===-1&&v.push(x)}l=l.filter(h=>!v.includes(h));let g="template";for(let h=0;h<u.length;h++){let x=u[h],y=l.indexOf(x);if(y===-1)l.splice(h,0,x),f.push([g,h]);else if(y!==h){let _=l.splice(h,1)[0],A=l.splice(y-1,1)[0];l.splice(h,0,A),l.splice(y,0,_),p.push([_,A])}else w.push(x);g=x}for(let h=0;h<v.length;h++){let x=v[h];x in c&&(T(()=>{Ze(c[x]),c[x].remove()}),delete c[x])}for(let h=0;h<p.length;h++){let[x,y]=p[h],_=c[x],A=c[y],O=document.createElement("div");T(()=>{A||U('x-for ":key" is undefined or invalid',i,y,c),A.after(O),_.after(A),A._x_currentIfEl&&A.after(A._x_currentIfEl),O.before(_),_._x_currentIfEl&&_.after(_._x_currentIfEl),O.remove()}),A._x_refreshXForScope(d[u.indexOf(y)])}for(let h=0;h<f.length;h++){let[x,y]=f[h],_=x==="template"?i:c[x];_._x_currentIfEl&&(_=_._x_currentIfEl);let A=d[y],O=u[y],L=document.importNode(i.content,!0).firstElementChild,z=Ge(A);xt(L,z,i),L._x_refreshXForScope=ae=>{Object.entries(ae).forEach(([Z,ce])=>{z[Z]=ce})},T(()=>{_.after(L),ge(()=>ie(L))()}),typeof O=="object"&&U("x-for key cannot be an object, it must be a string or an integer",i),c[O]=L}for(let h=0;h<w.length;h++)c[w[h]]._x_refreshXForScope(d[u.indexOf(w[h])]);i._x_prevKeys=u})}function Of(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,r=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=e.match(r);if(!s)return;let i={};i.items=s[2].trim();let a=s[1].replace(n,"").trim(),c=a.match(t);return c?(i.item=a.replace(t,"").trim(),i.index=c[1].trim(),c[2]&&(i.collection=c[2].trim())):i.item=a,i}function zs(e,t,n,r){let s={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(a=>a.trim()).forEach((a,c)=>{s[a]=t[c]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(a=>a.trim()).forEach(a=>{s[a]=t[a]}):s[e.item]=t,e.index&&(s[e.index]=n),e.collection&&(s[e.collection]=r),s}function Pf(e){return!Array.isArray(e)&&!isNaN(e)}function Bi(){}Bi.inline=(e,{expression:t},{cleanup:n})=>{let r=nn(e);r._x_refs||(r._x_refs={}),r._x_refs[t]=e,n(()=>delete r._x_refs[t])};M("ref",Bi);M("if",(e,{expression:t},{effect:n,cleanup:r})=>{e.tagName.toLowerCase()!=="template"&&U("x-if can only be used on a <template> tag",e);let s=B(e,t),i=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let c=e.content.cloneNode(!0).firstElementChild;return xt(c,{},e),T(()=>{e.after(c),ge(()=>ie(c))()}),e._x_currentIfEl=c,e._x_undoIf=()=>{T(()=>{Ze(c),c.remove()}),delete e._x_currentIfEl},c},a=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};n(()=>s(c=>{c?i():a()})),r(()=>e._x_undoIf&&e._x_undoIf())});M("id",(e,{expression:t},{evaluate:n})=>{n(t).forEach(s=>yf(e,s))});sn((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});Ir(Yo("@",Jo(Je("on:"))));M("on",ge((e,{value:t,modifiers:n,expression:r},{cleanup:s})=>{let i=r?B(e,r):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let a=Me(e,t,n,c=>{i(()=>{},{scope:{$event:c},params:[c]})});s(()=>a())}));ln("Collapse","collapse","collapse");ln("Intersect","intersect","intersect");ln("Focus","trap","focus");ln("Mask","mask","mask");function ln(e,t,n){M(t,r=>U(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}Xe.setEvaluator(Wo);Xe.setRawEvaluator(Vd);Xe.setReactivityEngine({reactive:Hr,effect:Wu,release:Ku,raw:k});var Mf=Xe,Bs=Mf;function Nf(e,t,n,r,s={}){const i=vr(),a=document.createElement("div");a.className="sb-composer absolute flex flex-column sb-bg ba sb-b-default br3 sb-shadow sans-serif overflow-hidden",a.style.left=`${t}%`,a.style.top=`${n}%`,a.style.transform="translate(12px, -50%)",a.innerHTML=`
    <div x-data="sbComposer" @keydown.escape.prevent.stop="cancel()">
      ${i?`
        <div class="flex items-center ph3 pt2">
          <img class="br-100 ba sb-b-default flex-shrink-0 mr2 sb-avatar" src="${i.avatarUrl}" alt="${i.login}" />
          <span class="f7 sb-fg-muted fw5">${i.login}</span>
        </div>
      `:""}
      <div class="ph3 pt3">
        <textarea class="sb-input sb-textarea w-100 ph2 pv2 br2 f6 sans-serif lh-copy db sb-f-sm"
                  placeholder="Leave a comment…"
                  x-model="text"
                  @keydown.meta.enter="submit()"
                  @keydown.ctrl.enter="submit()"></textarea>
      </div>
      <template x-if="error">
        <div class="ph3 pb2 f7 sb-fg-danger" x-text="error"></div>
      </template>
      <div class="flex items-center justify-end pa3">
        <button class="sb-btn-cancel ph3 pv2 br2 f7 fw5 pointer mr1" @click="cancel()">Cancel</button>
        <button class="sb-btn-success ph3 pv2 br2 f7 fw5 pointer bn" :disabled="submitting"
                @click="submit()" x-text="submitting ? 'Posting…' : 'Comment'">Comment</button>
      </div>
    </div>
  `,e.appendChild(a),a.addEventListener("click",d=>d.stopPropagation());function c(){window.removeEventListener("keydown",l,!0),a.remove()}function l(d){d.key==="Escape"&&(d.preventDefault(),d.stopPropagation(),c(),s.onCancel?.())}return window.addEventListener("keydown",l,!0),window.Alpine._sbComposerRegistered||(window.Alpine.data("sbComposer",()=>({text:"",submitting:!1,error:null,async submit(){const d=this.text.trim();if(d){this.submitting=!0,this.error=null;try{const u=await cd(r,t,n,d);c(),s.onSubmit?.(u)}catch(u){this.error=u.message,this.submitting=!1,console.error("[storyboard] Failed to post comment:",u)}}},cancel(){c(),s.onCancel?.()}})),window.Alpine._sbComposerRegistered=!0),window.Alpine.initTree(a),requestAnimationFrame(()=>{const d=a.querySelector("textarea");d&&d.focus();const u=a.getBoundingClientRect(),f=window.innerWidth,p=window.innerHeight,v=8;let w=12,g=-(u.height/2);u.left+u.width>f-v&&(w=-(u.width+12));const h=u.top+u.height/2,x=h+g+u.height;x>p-v&&(g-=x-p+v),h+g<v&&(g=v-h),a.style.transform=`translate(${w}px, ${g}px)`}),{el:a,destroy:c}}const Hs="sb-auth-modal";function Lf(){return new Promise(e=>{const t=document.getElementById(Hs);t&&t.remove();const n=document.createElement("div");n.id=Hs,n.className="sb-auth-backdrop fixed top-0 right-0 bottom-0 left-0 flex items-center justify-center sans-serif",n.innerHTML=`
      <div class="sb-auth-modal sb-bg ba sb-b-default br3 sb-shadow sb-fg overflow-hidden" x-data="sbAuthModal">
        <div class="flex items-center justify-between ph4 pv3 bb sb-b-muted">
          <h2 class="ma0 f5 fw6 sb-fg">Sign in for comments</h2>
          <button class="flex items-center justify-center bg-transparent bn br2 sb-fg-muted pointer sb-close-btn" @click="close()" aria-label="Close">×</button>
        </div>
        <div class="pa4">
          <p class="ma0 mb3 lh-copy sb-fg-muted sb-f-sm">
            Create a <a class="sb-fg-accent no-underline" href="https://github.com/settings/tokens/new?scopes=repo&description=Storyboard+Comments" target="_blank" rel="noopener">GitHub Personal Access Token</a> with access to <b>github/storyboard</b> repository and <b>Discussions</b> read/write scope. Then enter the token below to sign in and enable commenting features.
          </p>
          <label class="db mb1 fw5 sb-fg sb-f-sm" for="sb-auth-token-input">Personal Access Token</label>
          <input class="sb-input w-100 ph3 pv2 br2 f6 code db" id="sb-auth-token-input" type="password"
                 placeholder="github_pat_… or ghp_…" autocomplete="off" spellcheck="false"
                 x-model="token" @keydown.enter="submit()" />
          <div class="mt2 ph3 pv2 sb-bg-inset ba sb-b-muted br2 f7 sb-fg-muted lh-copy">
            <div class="mb1"><strong class="sb-fg">Fine-grained</strong> (recommended): <code class="dib ph1 sb-bg-muted br1 code sb-fg sb-code-badge">Discussions: Read and write</code></div>
            <div><strong class="sb-fg">Classic</strong>: <code class="dib ph1 sb-bg-muted br1 code sb-fg sb-code-badge">repo</code></div>
          </div>
          <template x-if="error">
            <div class="mt2 ph3 pv2 br2 sb-fg-danger sb-f-sm sb-error-alert" x-text="error"></div>
          </template>
          <template x-if="user">
            <div class="flex items-center pv1">
              <img class="br-100 ba sb-b-default mr3 sb-avatar-lg" :src="user.avatarUrl" :alt="user.login" />
              <div class="f6 sb-fg">
                <span x-text="user.login"></span>
                <span class="db f7 sb-fg-success mt1">✓ Signed in</span>
              </div>
            </div>
          </template>
        </div>
        <div class="flex items-center justify-end ph4 pv3 bt sb-b-muted">
          <button class="sb-btn-cancel ph3 pv1 br2 fw5 sans-serif pointer mr2 sb-f-sm" @click="close()">Cancel</button>
          <button class="sb-btn-success ph3 pv1 br2 fw5 sans-serif pointer bn sb-f-sm" :disabled="submitting"
                  @click="user ? done() : submit()" x-text="user ? 'Done' : (submitting ? 'Validating…' : 'Sign in')">
            Sign in
          </button>
        </div>
      </div>
    `,document.body.appendChild(n),n.addEventListener("click",s=>{s.target===n&&(n.remove(),e(null))});function r(s){s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),window.removeEventListener("keydown",r,!0),n.remove(),e(null))}window.addEventListener("keydown",r,!0),window.Alpine._sbAuthRegistered||(window.Alpine.data("sbAuthModal",()=>({token:"",submitting:!1,error:null,user:null,async submit(){const s=this.token.trim();if(s){this.submitting=!0,this.error=null;try{const i=await ql(s);Fl(s),this.user=i}catch(i){this.error=i.message}finally{this.submitting=!1}}},done(){window.removeEventListener("keydown",r,!0);const s=this.user;n.remove(),e(s)},close(){window.removeEventListener("keydown",r,!0),n.remove(),e(null)}})),window.Alpine._sbAuthRegistered=!0),window.Alpine.initTree(n),requestAnimationFrame(()=>{const s=n.querySelector("#sb-auth-token-input");s&&s.focus()})})}function Qf(){const e=vr();Ul(),console.log(`[storyboard] Signed out${e?` (was ${e.login})`:""}`)}const Fs={THUMBS_UP:"👍",THUMBS_DOWN:"👎",LAUGH:"😄",HOORAY:"🎉",CONFUSED:"😕",HEART:"❤️",ROCKET:"🚀",EYES:"👀"};function Us(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function G(e){const t=document.createElement("div");return t.textContent=e??"",t.innerHTML}let Q=null;function Kt(e,t,n,r={}){Q&&(Q.destroy(),Q=null);const s=vr(),i=t.replies??[],a=s&&t.author?.login===s.login,c=s&&n,l=document.createElement("div");l.className="sb-comment-window absolute flex flex-column sb-bg ba sb-b-default br3 sb-shadow sans-serif overflow-hidden",l.style.cssText=`z-index:100001;width:360px;max-height:480px;left:${t.meta?.x??0}%;top:${t.meta?.y??0}%;transform:translate(12px,-50%)`,l.setAttribute("x-data","sbCommentWindow"),l.setAttribute("@click.stop",""),l.innerHTML=`
      <!-- Header (draggable) -->
      <div class="flex items-center justify-between ph3 pv3 bb sb-b-muted sb-draggable"
           @mousedown="startDrag($event)">
        <div class="flex items-center">
          ${t.author?.avatarUrl?`<img class="br-100 ba sb-b-default flex-shrink-0 mr2 sb-avatar" src="${G(t.author.avatarUrl)}" alt="${G(t.author.login)}" />`:""}
          <span class="f7 fw6 sb-fg">${G(t.author?.login??"unknown")}</span>
          ${t.createdAt?`<span class="sb-fg-muted ml1 sb-f-xs">${G(Us(t.createdAt))}</span>`:""}
        </div>
        <div class="sb-comment-window-header-actions flex items-center flex-shrink-0" @mousedown.stop>
          <!-- Resolve -->
          <button class="flex items-center justify-center bg-transparent bn br2 pointer fw5 sans-serif flex-shrink-0 nowrap sb-action-btn"
                  :class="resolved ? 'sb-fg-success' : 'sb-fg-muted'"
                  :title="resolved ? 'Unresolve' : 'Resolve'"
                  :disabled="resolving"
                  @click="toggleResolve()"
                  x-text="resolving ? (resolved ? 'Unresolving…' : 'Resolving…') : (resolved ? 'Resolved ✓' : 'Resolve')"></button>
          <!-- Copy link -->
          <button class="flex items-center justify-center bg-transparent bn br2 pointer fw5 sans-serif flex-shrink-0 nowrap sb-action-btn"
                  :class="copied ? 'sb-fg-success' : 'sb-fg-muted'"
                  title="Copy link"
                  @click="copyLink()"
                  x-text="copied ? 'Copied!' : 'Copy link'"></button>
          <!-- Close -->
          <button class="flex items-center justify-center bg-transparent bn br2 sb-fg-muted pointer flex-shrink-0 sb-close-btn-sm"
                  aria-label="Close"
                  @click="close()">×</button>
        </div>
      </div>

      <!-- Body -->
      <div class="flex-auto overflow-y-auto ph3 pt3">
        <!-- Comment text / edit -->
        <template x-if="!editing">
          <div>
            <p class="lh-copy sb-fg ma0 mb2 word-wrap sb-f-sm">${G(t.text)}</p>
          </div>
        </template>
        <template x-if="editing">
          <div>
            <textarea class="sb-input sb-textarea w-100 ph2 pv1 br2 f7 sans-serif lh-copy db mb2"
                      x-model="editText" x-ref="editArea" x-init="$nextTick(() => $refs.editArea?.focus())"></textarea>
            <div class="flex justify-end mb2">
              <button class="sb-btn-cancel ph2 pv1 br2 f7 fw5 sans-serif pointer mr1" @click="editing = false">Cancel</button>
              <button class="sb-btn-success ph3 pv2 br2 f7 fw5 sans-serif pointer bn"
                      :disabled="saving" @click="saveEdit()"
                      x-text="saving ? 'Saving…' : 'Save'">Save</button>
            </div>
          </div>
        </template>

        <!-- Reactions -->
        <div class="flex items-center flex-wrap mb2" x-ref="reactionBar">
          <template x-for="(group, gi) in reactions" :key="group.content">
            <template x-if="(group.users?.totalCount ?? 0) > 0">
              <button class="f7 flex items-center ph2 br-pill pointer sans-serif mr1 mb1 pv1 hover:b--blue"
                      :class="group.viewerHasReacted ? 'sb-pill sb-pill-active' : 'sb-pill'"
                      @click.stop="toggleReaction(group.content, gi)">
                <span class="mr1 f7" x-text="emojiFor(group.content)"></span>
                <span class="f7" x-text="group.users?.totalCount ?? 0"></span>
              </button>
            </template>
          </template>
          <div class="relative mr1 mb1 dib">
            <button class="f7 flex items-center ph2 pv1 br-pill pointer sans-serif sb-pill"
                    @click.stop="pickerTarget = pickerTarget === 'comment' ? null : 'comment'"><span>😀 +</span></button>
            <template x-if="pickerTarget === 'comment'">
              <div class="sb-reaction-picker absolute left-0 flex pa1 sb-bg ba sb-b-default br3 sb-shadow" @click.outside="pickerTarget = null">
                <template x-for="[key, emoji] in emojiEntries" :key="key">
                  <button class="flex items-center justify-center br2 bn f6 pointer mr1"
                          :class="isReacted(key) ? 'sb-reaction-btn-active' : 'bg-transparent sb-reaction-btn'"
                          @click.stop="toggleReaction(key); pickerTarget = null"
                          x-text="emoji"></button>
                </template>
              </div>
            </template>
          </div>
          <template x-if="!editing">
            <div class="dib mb1 ml-auto">
            ${a?'<button class="sb-fg-muted bg-transparent bn pointer f7 underline-hover" @click="editing = true; editText = commentText">Edit</button>':""}
            </div>
          </template>
        </div>

        <!-- Replies -->
        ${i.length>0?`
        <div class="bt sb-b-muted pt2 mt1">
          <div class="fw6 sb-fg-muted ttu tracked mb2 sb-f-xs">${i.length} ${i.length===1?"Reply":"Replies"}</div>
          ${i.map((f,p)=>`
          <div class="flex mb2" data-reply-index="${p}">
            ${f.author?.avatarUrl?`<img class="br-100 ba sb-b-default flex-shrink-0 mr2 sb-avatar-sm" src="${G(f.author.avatarUrl)}" alt="${G(f.author.login)}" />`:""}
            <div class="flex-auto sb-min-w-0">
              <div class="flex items-center mb1">
                <span class="f7 fw6 sb-fg mr1">${G(f.author?.login??"unknown")}</span>
                ${f.createdAt?`<span class="sb-fg-muted sb-f-xs">${G(Us(f.createdAt))}</span>`:""}
                ${s&&f.author?.login===s.login?`
                <div class="flex gap-2 ml-auto flex-shrink-0">
                  <template x-if="editingReply !== ${p}">
                    <button class="sb-fg-muted bg-transparent bn pointer underline-hover sb-f-xs"
                            @click="editingReply = ${p}; editReplyText = replyTexts[${p}]">Edit</button>
                  </template>
                  <template x-if="editingReply !== ${p}">
                    <button class="sb-fg-danger bg-transparent bn pointer underline-hover sb-f-xs"
                            @click="deleteReplyAt(${p})">Delete</button>
                  </template>
                </div>
                `:""}
              </div>
              <template x-if="editingReply !== ${p}">
                <p class="lh-copy sb-fg ma0 word-wrap sb-f-sm">${G(f.text??f.body)}</p>
              </template>
              <template x-if="editingReply === ${p}">
                <div>
                  <textarea class="sb-input sb-textarea-sm w-100 ph2 pv1 br2 sans-serif lh-copy db mb1 f7"
                            x-model="editReplyText"></textarea>
                  <div class="flex justify-end mb1">
                    <button class="sb-btn-cancel ph2 pv1 br2 f7 fw5 sans-serif pointer mr1" @click="editingReply = -1">Cancel</button>
                    <button class="sb-btn-success ph3 pv2 br2 f7 fw5 sans-serif pointer bn"
                            :disabled="savingReply" @click="saveReply(${p})"
                            x-text="savingReply ? 'Saving…' : 'Save'">Save</button>
                  </div>
                </div>
              </template>
              <!-- Reply reactions -->
              <div class="flex items-center flex-wrap mt1">
                <template x-for="(rg, rgi) in replyReactions[${p}]" :key="rg.content">
                  <template x-if="(rg.users?.totalCount ?? 0) > 0">
                    <button class="dib flex f7 items-center ph2 br-pill pointer sans-serif mr1 mb1 "
                            :class="rg.viewerHasReacted ? 'sb-pill sb-pill-active' : 'sb-pill'"
                            @click.stop="toggleReplyReaction(${p}, rg.content, rgi)">
                      <span class="mr1" x-text="emojiFor(rg.content)"></span>
                      <span x-text="rg.users?.totalCount ?? 0"></span>
                    </button>
                  </template>
                </template>
                <div class="relative mr1 mb1">
                  <button class="f7 flex items-center ph2 pv1 br-pill pointer sans-serif sb-pill"
                          @click.stop="pickerTarget = pickerTarget === 'reply-${p}' ? null : 'reply-${p}'">😀 +</button>
                  <template x-if="pickerTarget === 'reply-${p}'">
                    <div class="sb-reaction-picker absolute left-0 flex pa1 sb-bg ba sb-b-default br3 sb-shadow" @click.outside="pickerTarget = null">
                      <template x-for="[key, emoji] in emojiEntries" :key="key">
                        <button class="flex items-center justify-center br2 bn f6 pointer mr1"
                                :class="isReplyReacted(${p}, key) ? 'sb-reaction-btn-active' : 'bg-transparent sb-reaction-btn'"
                                @click.stop="toggleReplyReaction(${p}, key); pickerTarget = null"
                                x-text="emoji"></button>
                      </template>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </div>
          `).join("")}
        </div>
        `:""}
      </div>

      <!-- Reply form -->
      ${c?`
      <div class="bt sb-b-muted ph3 pv3 flex flex-column">
        <textarea class="sb-input sb-textarea-sm w-100 ph2 pv1 br2 f7 sans-serif lh-copy db mb1"
                  placeholder="Reply…"
                  x-model="replyText"
                  @keydown.meta.enter="submitReply()"
                  @keydown.ctrl.enter="submitReply()"
                  @keydown.escape.prevent.stop></textarea>
        <div class="flex justify-end mt2">
          <button class="sb-btn-success ph3 pv2 br2 f7 fw5 sans-serif pointer bn"
                  :disabled="!replyText.trim() || submittingReply"
                  @click="submitReply()"
                  x-text="submittingReply ? 'Posting…' : 'Reply'">Reply</button>
        </div>
      </div>
      `:""}
  `;const d=new URL(window.location.href);d.searchParams.set("comment",t.id),window.history.replaceState(null,"",d.toString()),e.appendChild(l);function u(){l.remove(),Q?.el===l&&(Q=null);const f=new URL(window.location.href);f.searchParams.delete("comment"),window.history.replaceState(null,"",f.toString()),r.onClose?.()}return window.Alpine._sbCommentWindowRegistered||(window.Alpine.data("sbCommentWindow",()=>({resolved:!1,resolving:!1,copied:!1,editing:!1,editText:"",saving:!1,commentText:"",replyText:"",submittingReply:!1,editingReply:-1,editReplyText:"",savingReply:!1,pickerTarget:null,reactions:[],replyReactions:[],replyTexts:[],emojiEntries:Object.entries(Fs),_comment:null,_discussion:null,_container:null,_callbacks:null,_destroy:null,_win:null,init(){const f=this.$root._sbInit;f&&(this._comment=f.comment,this._discussion=f.discussion,this._container=f.container,this._callbacks=f.callbacks,this._destroy=f.destroy,this._win=f.win,this.resolved=!!this._comment.meta?.resolved,this.commentText=this._comment.text??"",this.reactions=[...this._comment.reactionGroups??[]],this.replyTexts=(this._comment.replies??[]).map(p=>p.text??p.body??""),this.replyReactions=(this._comment.replies??[]).map(p=>[...p.reactionGroups??[]]))},emojiFor(f){return Fs[f]??f},isReacted(f){return this.reactions.some(p=>p.content===f&&p.viewerHasReacted)},isReplyReacted(f,p){return(this.replyReactions[f]??[]).some(v=>v.content===p&&v.viewerHasReacted)},async toggleResolve(){this.resolving=!0;try{this.resolved?(await ud(this._comment.id,this._comment._rawBody??this._comment.body??""),this._comment.meta={...this._comment.meta},delete this._comment.meta.resolved,this.resolved=!1,this.resolving=!1,this._callbacks.onMove?.()):(await dd(this._comment.id,this._comment._rawBody??this._comment.body??""),this._comment.meta={...this._comment.meta,resolved:!0},this._callbacks.onMove?.(),this._destroy())}catch(f){console.error("[storyboard] Failed to toggle resolve:",f),this.resolving=!1}},copyLink(){const f=new URL(window.location.href);f.searchParams.set("comment",this._comment.id),navigator.clipboard.writeText(f.toString()).then(()=>{this.copied=!0,setTimeout(()=>{this.copied=!1},2e3)}).catch(()=>{const p=document.createElement("input");p.value=f.toString(),document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()})},close(){this._destroy()},async saveEdit(){const f=this.editText.trim();if(f){this.saving=!0;try{await fd(this._comment.id,this._comment._rawBody??this._comment.body??"",f),this._comment.text=f,this._comment._rawBody=null,this.commentText=f;const p=this.$root.querySelector(".word-wrap");p&&(p.textContent=f),this.editing=!1,this.saving=!1}catch(p){console.error("[storyboard] Failed to edit comment:",p),this.saving=!1}}},async toggleReaction(f,p){const v=p!==void 0?this.reactions[p]:this.reactions.find(g=>g.content===f),w=v?.viewerHasReacted??!1;w&&v?(v.users={totalCount:Math.max(0,(v.users?.totalCount??1)-1)},v.viewerHasReacted=!1,v.users.totalCount===0&&(this.reactions=this.reactions.filter(g=>g.content!==f))):v?(v.users={totalCount:(v.users?.totalCount??0)+1},v.viewerHasReacted=!0):this.reactions.push({content:f,users:{totalCount:1},viewerHasReacted:!0}),this._comment.reactionGroups=this.reactions;try{w?await Cs(this._comment.id,f):await Ss(this._comment.id,f)}catch(g){console.error("[storyboard] Reaction toggle failed:",g)}},async toggleReplyReaction(f,p,v){const w=(this._comment.replies??[])[f];if(!w)return;const g=this.replyReactions[f]??[],h=v!==void 0?g[v]:g.find(y=>y.content===p),x=h?.viewerHasReacted??!1;x&&h?(h.users={totalCount:Math.max(0,(h.users?.totalCount??1)-1)},h.viewerHasReacted=!1,h.users.totalCount===0&&(this.replyReactions[f]=g.filter(y=>y.content!==p))):h?(h.users={totalCount:(h.users?.totalCount??0)+1},h.viewerHasReacted=!0):(g.push({content:p,users:{totalCount:1},viewerHasReacted:!0}),this.replyReactions[f]=g),w.reactionGroups=this.replyReactions[f];try{x?await Cs(w.id,p):await Ss(w.id,p)}catch(y){console.error("[storyboard] Reaction toggle failed:",y)}},async submitReply(){const f=this.replyText.trim();if(f){this.submittingReply=!0;try{await ld(this._discussion.id,this._comment.id,f),this.replyText="",this.submittingReply=!1,this._callbacks.onMove?.()}catch(p){console.error("[storyboard] Failed to post reply:",p),this.submittingReply=!1}}},async saveReply(f){const p=this.editReplyText.trim();if(!p)return;const v=(this._comment.replies??[])[f];if(v){this.savingReply=!0;try{await pd(v.id,p),v.text=p,v.body=p,this.replyTexts[f]=p,this.editingReply=-1,this.savingReply=!1}catch(w){console.error("[storyboard] Failed to edit reply:",w),this.savingReply=!1}}},async deleteReplyAt(f){const p=(this._comment.replies??[])[f];if(!(!p||!confirm("Delete this reply?")))try{await md(p.id),this._callbacks.onMove?.()}catch(v){console.error("[storyboard] Failed to delete reply:",v)}},startDrag(f){if(f.target.closest(".sb-comment-window-header-actions"))return;const p=this._win,v=f.clientX,w=f.clientY,g=p.getBoundingClientRect(),h=g.left,x=g.top;f.target.style.cursor="grabbing";const y=A=>{const O=A.clientX-v,L=A.clientY-w;p.style.position="fixed",p.style.left=`${h+O}px`,p.style.top=`${x+L}px`,p.style.transform="none"},_=()=>{f.target.style.cursor="grab",document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",_),f.preventDefault()}})),window.Alpine._sbCommentWindowRegistered=!0),l._sbInit={comment:t,discussion:n,container:e,callbacks:r,destroy:u,win:l},window.Alpine.initTree(l),requestAnimationFrame(()=>{const f=l.getBoundingClientRect(),p=window.innerWidth,v=window.innerHeight,w=8;let g=12,h=-(f.height/2);f.left+f.width>p-w&&(g=-(f.width+12));const x=f.top+f.height/2,y=x+h+f.height;y>v-w&&(h-=y-v+w),x+h<w&&(h=w-x),l.style.transform=`translate(${g}px, ${h}px)`}),Q={el:l,destroy:u},{el:l,destroy:u}}function Hi(){Q&&(Q.destroy(),Q=null)}let fe=null,ee=null,F=null,Yn=[],Ve=null;function qs(e){const t=document.createElement("div");return t.textContent=e??"",t.innerHTML}function dn(){return document.querySelector("main")||document.body}function un(){if(ee)return ee;const e=dn();return getComputedStyle(e).position==="static"&&(e.style.position="relative"),ee=document.createElement("div"),ee.className="sb-comment-overlay absolute top-0 right-0 bottom-0 left-0 pe-none",e.appendChild(ee),ee}function Df(){fe||(fe=document.createElement("div"),fe.className="sb-banner fixed flex items-center pe-none sans-serif sb-shadow",fe.innerHTML=`
    Comment mode — click to place a comment. Press
    <kbd class="sb-kbd">C</kbd> or
    <kbd class="sb-kbd">Esc</kbd> to exit.
  `,document.body.appendChild(fe))}function zf(){fe&&(fe.remove(),fe=null)}function fn(){return window.location.pathname}function Fr(){for(const e of Yn)e.remove();Yn=[]}function mt(){Ao(fn()),qi()}function Fi(e,t,n){const r=Math.round(n*137.5%360),s=document.createElement("div");s.className="sb-comment-pin absolute br-100 sb-bg pointer sb-shadow pe-auto overflow-hidden",s.style.left=`${t.meta?.x??0}%`,s.style.top=`${t.meta?.y??0}%`,s.style.setProperty("--pin-hue",String(r)),t.meta?.resolved&&s.setAttribute("data-resolved","true"),s.title=`${t.author?.login??"unknown"}: ${t.text?.slice(0,80)??""}`,s.innerHTML=t.author?.avatarUrl?`<img class="br-100 db sb-pin-img" src="${qs(t.author.avatarUrl)}" alt="${qs(t.author.login)}" draggable="false" />`:"",s._commentId=t.id,t._rawBody=t.body;let i=!1;return s.addEventListener("mousedown",a=>{if(a.button!==0)return;i=!1;const c=dn(),l=c.getBoundingClientRect(),d=a.clientX,u=a.clientY,f=parseFloat(s.style.left)/100*l.width,p=parseFloat(s.style.top)/100*l.height,v=g=>{const h=g.clientX-d,x=g.clientY-u;if(!i&&Math.abs(h)<4&&Math.abs(x)<4)return;i=!0;const y=c.getBoundingClientRect(),_=Math.round((f+h)/y.width*1e3)/10,A=Math.round((p+x)/y.height*1e3)/10;s.style.left=`${_}%`,s.style.top=`${A}%`},w=async g=>{if(document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",w),!i)return;const h=c.getBoundingClientRect(),x=g.clientX-d,y=g.clientY-u,_=Math.round((f+x)/h.width*1e3)/10,A=Math.round((p+y)/h.height*1e3)/10;t.meta={...t.meta,x:_,y:A};try{await hd(t.id,t._rawBody??t.body??"",_,A),t._rawBody=null,Ao(fn())}catch(O){console.error("[storyboard] Failed to move pin:",O)}};document.addEventListener("mousemove",v),document.addEventListener("mouseup",w),a.preventDefault()}),s.addEventListener("click",async a=>{if(a.stopPropagation(),!i){F&&(F.destroy(),F=null);try{const c=await Co(t.id);c&&(c._rawBody=c.body,Kt(e,c,Ve,{onClose:()=>{},onMove:()=>mt()}))}catch(c){console.warn("[storyboard] Could not load comment detail:",c.message),Kt(e,t,Ve,{onClose:()=>{},onMove:()=>mt()})}}}),e.appendChild(s),Yn.push(s),s}function Ui(){if(!Ve?.comments?.length)return;const e=un();Fr(),Ve.comments.forEach((t,n)=>{t.meta?.x!=null&&t.meta?.y!=null&&Fi(e,t,n)})}async function qi(){if(!Ht())return;const e=un(),t=fn(),n=bd(t);if(n){Ve=n,Ui();return}try{const r=await ad(t);if(Ve=r,r&&vd(t,r),Fr(),!r?.comments?.length)return;r.comments.forEach((s,i)=>{s.meta?.x!=null&&s.meta?.y!=null&&Fi(e,s,i)}),Bf(e,r)}catch(r){console.warn("[storyboard] Could not load comments:",r.message)}}async function Bf(e,t){const n=new URLSearchParams(window.location.search).get("comment");if(!n||!t?.comments?.length)return;const r=t.comments.find(s=>s.id===n);if(r){if(r.meta?.y!=null){const s=dn(),i=r.meta.y/100*s.scrollHeight,a=s.scrollTop||window.scrollY,c=a+window.innerHeight;if(i<a||i>c){const l=Math.max(0,i-window.innerHeight/3);window.scrollTo({top:l,behavior:"smooth"})}}try{const s=await Co(n);if(s){s._rawBody=s.body,Kt(e,s,t,{onClose:()=>{},onMove:()=>mt()});return}}catch(s){console.warn("[storyboard] Could not load comment detail:",s.message)}r._rawBody=r.body,Kt(e,r,t,{onClose:()=>{},onMove:()=>mt()})}}function Hf(e){if(!Tt()||e.target.closest(".sb-composer")||e.target.closest(".sb-comment-pin")||e.target.closest(".sb-comment-window"))return;Hi(),F&&(F.destroy(),F=null);const t=dn(),n=t.getBoundingClientRect(),r=Math.round((e.clientX-n.left)/n.width*1e3)/10,s=Math.round((e.clientY-n.top+t.scrollTop)/t.scrollHeight*1e3)/10,i=un();F=Nf(i,r,s,fn(),{onCancel:()=>{F=null},onSubmit:()=>{F=null,mt()}})}function Ff(e){e?(document.body.classList.add("sb-comment-mode"),Df(),un(),Ui(),qi()):(document.body.classList.remove("sb-comment-mode"),zf(),F&&(F.destroy(),F=null),Hi(),Fr(),ee&&(ee.remove(),ee=null))}let Ws=!1;function Uf(){Ws||(Ws=!0,window.Alpine=Bs,Bs.start(),Kl(Ff),document.addEventListener("click",e=>{Tt()&&(e.target.closest(".sb-devtools-wrapper")||e.target.closest(".sb-auth-backdrop")||e.target.closest(".sb-comments-drawer")||e.target.closest(".sb-comments-drawer-backdrop")||e.target.closest(".sb-composer")||e.target.closest(".sb-comment-pin")||e.target.closest(".sb-comment-window")||Hf(e))}),window.addEventListener("keydown",e=>{const t=e.target.tagName;if(!(t==="INPUT"||t==="TEXTAREA"||t==="SELECT"||e.target.isContentEditable)){if(e.key==="c"&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!zt())return;if(e.preventDefault(),!Tt()&&!Ht()){Lf();return}Wl()}e.key==="Escape"&&Tt()&&(e.preventDefault(),ws(!1))}}),zt()&&Ht()&&new URLSearchParams(window.location.search).get("comment")&&ws(!0))}const qf={repo:{owner:"dfosco",name:"storyboard"},discussions:{category:"General"}},Wf={comments:qf},Wi=ga(Ll,{basename:"/storyboard/"});ac(Wi,"/storyboard/");Oa();Ta();Na(Wf);Ka({basePath:"/storyboard/"});Uf();const Kf=document.getElementById("root"),Vf=ya.createRoot(Kf);Vf.render(o.jsx(C.StrictMode,{children:o.jsx(_a,{colorMode:"auto",children:o.jsxs(wa,{children:[o.jsx(Hl,{}),o.jsx(ba,{router:Wi})]})})}));export{Qf as a,id as f,tn as g,Ht as i,Xf as l,Lf as o,ws as s,Wl as t};
